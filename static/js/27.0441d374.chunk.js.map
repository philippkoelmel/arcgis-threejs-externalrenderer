{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/centroid.js","../node_modules/@arcgis/core/chunks/quickselect.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","../node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView.js"],"names":["n","t","e","o","u","l","N","lengths","length","s","originPosition","coords","c","f","i","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","h","g","E","r","push","sort","I","m","b","Math","sqrt","a","exports","log","M","exp","v","max","floor","min","x","p","this","items","type","objectStateId","object","renderGeometry","owner","remove","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","_extents","allocator","_tmpExtent","_dirty","clear","contains","removeContained","pushNew","mergeTight","pop","hasProgressed","done","getItemAt","delete","d","madeProgress","some","filterInPlace","containsPoint","arguments","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","handles","updateElevation","layerView","graphicsCore","events","queryGraphicUIDsInExtent","elevationProvider","view","resourceController","scheduler","on","_elevationChanged","watch","suspendedChange","registerTask","ELEVATION_ALIGNMENT","destroy","notifyChange","suspended","running","size","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","renderCoordsHelper","effectiveUpdatePolicy","keys","getGraphics3DGraphicById","alignWithElevation","spatialReference","emit","extent","needsElevationUpdates","context","layer","elevationInfo","mode","computedExtent","xmin","xmax","ymin","ymax","readOnly","prototype","elevationAlignment","watchUpdatingTracking","S","suspendResumeExtent","scaleVisibilityEnabled","w","preferredUpdatePolicy","graphicSymbolSupported","scaleVisibility","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","spatialIndex","setup","basemapTerrain","_set","j","objectStates","destroyed","updateClippingExtent","setupSuspendResumeExtent","startCreateGraphics","updating","loadedGraphics","find","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","acquireSet","highlight","toArray","isArray","map","setUids","setObjectIds","clippingArea","setClippingExtent","recreateAllGraphics","C","y","extentPadding","setExtent","updateSuspendResumeExtent","constructOnly","aliasOf","pause","resume"],"mappings":"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","file":"static/js/27.0441d374.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function n(t,n){return t?n?4:3:n?3:2}function e(e,o,u,l,N){if(t(o)||!o.lengths.length)return null;const s=\"upperLeft\"===(null==N?void 0:N.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const c=e.coords,f=[],i=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:h}=o,g=n(u,l);let E=0;for(const t of T){const n=r(i,h,E,t,u,l,s);n&&f.push(n),E+=t*g}if(f.sort(((t,n)=>{let e=s*t[2]-s*n[2];return 0===e&&u&&(e=t[4]-n[4]),e})),f.length){let t=6*f[0][2];c[0]=f[0][0]/t,c[1]=f[0][1]/t,u&&(t=6*f[0][4],c[2]=0!==t?f[0][3]/t:0),(c[0]<i[0]||c[0]>i[1]||c[1]<i[2]||c[1]>i[3]||u&&(c[2]<i[4]||c[2]>i[5]))&&(c.length=0)}if(!c.length){const t=o.lengths[0]?I(h,0,T[0],u,l):null;if(!t)return null;c[0]=t[0],c[1]=t[1],u&&t.length>2&&(c[2]=t[2])}return e}function r(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,m=I-1;n<m;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function I(t,e,r,I,s){const c=n(I,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,m=r-1;n<m;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],m=t[i+2],b=I?u(n,e,r,s,c,m):o(n,e,s,c);if(b)if(T+=b,I){const t=N(n,e,r,s,c,m);h+=b*t[0],g+=b*t[1],E+=b*t[2]}else{const t=l(n,e,s,c);h+=b*t[0],g+=b*t[1]}}return T>0?I?[h/T,g/T,E/T]:[h/T,g/T]:r>0?I?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function u(t,n,e,r,I,o){const u=r-t,l=I-n,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function l(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}export{e as getCentroidOptimizedGeometry,I as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nvar r,t,o,a={exports:{}};r=a,t=function(){function r(r,o,n,f,e){t(r,o,n||0,f||r.length-1,e||a)}function t(r,a,n,f,e){for(;f>n;){if(f-n>600){var h=f-n+1,i=a-n+1,u=Math.log(h),M=.5*Math.exp(2*u/3),v=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);t(r,a,Math.max(n,Math.floor(a-i*M/h+v)),Math.min(f,Math.floor(a+(h-i)*M/h+v)),e)}var x=r[a],c=n,p=f;for(o(r,n,a),e(r[f],x)>0&&o(r,n,f);c<p;){for(o(r,c,p),c++,p--;e(r[c],x)<0;)c++;for(;e(r[p],x)>0;)p--}0===e(r[n],x)?o(r,n,p):o(r,++p,f),p<=a&&(n=p+1),a<=p&&(f=p-1)}}function o(r,t,o){var a=r[t];r[t]=r[o],r[o]=a}function a(r,t){return r<t?-1:r>t?1:0}return r},void 0!==(o=t())&&(r.exports=o);var n=a.exports;export{n as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,copy as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends t{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(e,t,i,s){this.layerView=e,this.queryGraphicUIDsInExtent=t,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(e=>this._elevationChanged(e))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(e){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,e.madeProgress()),e.run((()=>this.dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(e){const t=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,t,i),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this.dirtyExtents.empty&&!e.done;){const t=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);r(t)&&t.needsElevationUpdates()&&this.dirtyGraphicsSet.add(e)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,e.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this.dirtyGraphicsSet.add(t)))}_elevationChanged(e){if(\"scene\"===e.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.layerView.suspended){if(!this.updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i})}else t[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(t),this.notifyChange(\"updating\")}};e([a({readOnly:!0})],p.prototype,\"updating\",null),e([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=e([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);var d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Collection.js\";import r from\"../../../../core/Handles.js\";import{isSome as a,destroyMaybe as o,isNone as n}from\"../../../../core/maybe.js\";import{isAbortError as c}from\"../../../../core/promiseUtils.js\";import{init as h}from\"../../../../core/watchUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as d}from\"../../../../core/accessorSupport/diffUtils.js\";import u from\"../../../../layers/Layer.js\";import{hydrateGraphic as g}from\"../../../../layers/graphics/hydratedFeatures.js\";import m from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as y}from\"./constants.js\";import{Graphics3DCore as f}from\"./Graphics3DCore.js\";import b from\"./Graphics3DElevationAlignment.js\";import{Graphics3DObjectStates as j}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as C}from\"./graphicUtils.js\";import{WatchUpdatingTracking as S}from\"../../../support/WatchUpdatingTracking.js\";let v=class extends i{constructor(t){super(t),this.graphicsCore=null,this.elevationAlignment=new b,this.watchUpdatingTracking=new S,this.handles=new r,this.suspendResumeExtent=null}normalizeCtorArgs(t){let e=null;t.scaleVisibilityEnabled&&(delete(t={...t}).scaleVisibilityEnabled,e=new w);const i=new f({owner:t.owner,layer:t.layer,preferredUpdatePolicy:1,graphicSymbolSupported:!0});return{...t,graphicsCore:i,scaleVisibility:e}}initialize(){const t=this.scaleVisibility;a(t)&&\"minScale\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>t.layerMinMaxScaleChangeHandler())),\"elevationInfo\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{d(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())}))}async setup(){const t=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),a(this.scaleVisibility)&&\"minScale\"in this.layer){const e=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,e)}this._set(\"objectStates\",new j(this.graphicsCore));try{await this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,objectStates:this.objectStates})}catch(e){if(c(e))return;throw e}this.destroyed||(this.handles.add(this.view.watch(\"clippingArea\",(()=>this.updateClippingExtent()),!0)),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles=o(this.handles),this.watchUpdatingTracking.destroy(),this._set(\"elevationAlignment\",o(this.elevationAlignment)),this._set(\"scaleVisibility\",o(this.scaleVisibility)),this._set(\"objectStates\",o(this.objectStates)),this._set(\"graphicsCore\",o(this.graphicsCore))}get suspended(){return!(!a(this.scaleVisibility)||!this.scaleVisibility.suspended)}get updating(){var t,e;return!!(null!=(t=this.graphicsCore)&&t.updating||a(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(e=this.watchUpdatingTracking)&&e.updating)}getGraphicFromGraphicUid(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof u?this.layer:null;return g(e,t)}}}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof m)return x;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof e)return this.highlight([t]);if(t instanceof s&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setObjectIds(i,e),s}}return x}updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}updateSuspendResumeExtent(){n(this.scaleVisibility)||(this.suspendResumeExtent=C(this.graphicsCore.computedExtent,this.suspendResumeExtent,y,this.graphicsCore.extentPadding),this.scaleVisibility.setExtent(this.suspendResumeExtent))}setupSuspendResumeExtent(){n(this.scaleVisibility)||(h(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent()),!0),this.graphicsCore.watch(\"extentPadding\",(t=>this.updateSuspendResumeExtent())))}};t([p({constructOnly:!0})],v.prototype,\"owner\",void 0),t([p({constructOnly:!0})],v.prototype,\"layer\",void 0),t([p({readOnly:!0,aliasOf:\"owner.view\"})],v.prototype,\"view\",void 0),t([p({constructOnly:!0})],v.prototype,\"graphicsCore\",void 0),t([p({constructOnly:!0})],v.prototype,\"scaleVisibility\",void 0),t([p({readOnly:!0})],v.prototype,\"elevationAlignment\",void 0),t([p({readOnly:!0})],v.prototype,\"objectStates\",void 0),t([p({readOnly:!0})],v.prototype,\"watchUpdatingTracking\",void 0),t([p({readOnly:!0})],v.prototype,\"suspended\",null),t([p({readOnly:!0})],v.prototype,\"updating\",null),v=t([l(\"esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView\")],v);const x={remove(){},pause(){},resume(){}};var E=v;export{E as default};\n"],"sourceRoot":""}