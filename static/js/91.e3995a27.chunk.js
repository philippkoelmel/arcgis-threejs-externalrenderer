(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[91],{1202:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return zt}));var n=i(2),r=i(3),s=i(6),a=i(7),o=i(0),c=i(4),h=i(1),l=(i(17),i(18),i(16),i(12)),u=i(1028),d=i(631),p=i(34),g=i(61),v=i(49),f=i(70),b=i(21),m=i(969),y=i(314),O=i(31),j=i(40),_=i(5),k=i(10),V=i(46),x=i(56),w=i(494),L=i(874),C=i(163),P=i(970),S=i(97);function E(e,t,i){var n={distance:null};return Object(P.b)(n,[e[0],e[1]],[t[0],t[1]],i),n.distance}function D(e,t,i){var n=t[0]-e[0],r=t[1]-e[1],s=i[0]-e[0],a=i[1]-e[1];return.5*Math.abs(n*a-r*s)}function M(e,t,i,n){var r=R;return Object(v.A)(e,n,G)&&Object(v.A)(t,n,z)&&Object(v.A)(i,n,A)?(r.setPoint(0,0,G),r.setPoint(0,1,z),r.setPoint(0,2,A),Math.abs(Object(L.geodesicArea)(r,"square-meters"))):0}var G=Object(k.e)(),z=Object(k.e)(),A=Object(k.e)(),R=new C.a({rings:[[G,z,A]],spatialReference:x.a.WGS84}),T=Object(k.e)(),I=i(1032),q=i(179),U=function(){function e(t,i){Object(n.a)(this,e),this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=Object(k.e)(),this.areaCentroidRenderCoords=Object(k.e)(),this.geodesicAreaCentroidRenderCoords=Object(k.e)(),this._length=0,this._centroidRenderCoords=Object(k.e)(),this._planeWorldCoords=Object(V.e)(),this._worldUp=Object(k.e)(),this._worldTangent=Object(k.e)(),this._frame=[Object(k.e)(),Object(k.e)(),Object(k.e)()],this._pathVersion=-1,this._validMeasurement=!1,this._tempU=Object(k.e)(),this._tempV=Object(k.e)(),this._tempVec3=Object(k.e)(),this._tempSphere={center:Object(k.e)(),radius:0},this._sceneView=t,this.unitNormalizer=i}return Object(r.a)(e,[{key:"update",value:function(e,t,i,n,r){var s=this.unitNormalizer,a=this._sceneView.renderSpatialReference,o=this.unitNormalizer.spatialReference;if(this._pathVersion===e.version&&this._validMeasurement===i&&!r)return!1;this._pathVersion=e.version,this._validMeasurement=i;var h=e.numVertices;this._resize(h);var l=Object(f.g)(t.spatialReference),u=Object(v.b)(t.spatialReference,l)&&Object(v.a)(t.spatialReference),d=this.positionsGeographic,p=this.positionsWorldCoords,g=this.positionsRenderCoords,b=this.positionsSpherical;e.forEachVertexPosition((function(e,i){(function(e,t){t.hasZ||(t.z=Object(c.u)(Object(q.b)(e,t,"ground"),0))})(t.elevationProvider,e),Object(v.u)(e,p[i],o),Object(v.u)(e,g[i],a),u&&(Object(v.v)(e,d[i]),Object(v.u)(e,b[i],l),Object(_.t)(b[i],b[i]))}));var y=this._updatePathLengths(i);if(this.pathLength=this._length>1?new m.a(s.normalizeDistance(y),"meters"):null,u){var O=this._updateGeodesicPathLengths(i,o);this.geodesicPathLength=this._length>1?new m.a(O,"meters"):null}else this.geodesicPathLength=null;return i?(this._updateArea(t,s,a,o,n),u&&this._updateGeodesicArea(t),!0):(this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear(),!0)}},{key:"getData",value:function(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,unitNormalizer:this.unitNormalizer}}},{key:"_resize",value:function(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(Object(k.e)()),this.positionsRenderCoords.push(Object(k.e)()),this.positionsProjectedWorldCoords.push(Object(j.b)()),this.positionsFittedRenderCoords.push(Object(k.e)()),this.positionsGeographic.push(Object(k.e)()),this.positionsSpherical.push(Object(k.e)()),this.positionsStereographic.push(Object(j.b)()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}},{key:"_updatePathLengths",value:function(e){for(var t=this.positionsWorldCoords,i=this.pathSegmentLengths,n=0,r=0;r<this._length;++r){var s=i[r]=Object(_.o)(t[r],t[(r+1)%this._length]);(r<this._length-1||e)&&(n+=s)}return n}},{key:"_updateGeodesicPathLengths",value:function(e,t){for(var i=this.positionsGeographic,n=this.geodesicPathSegmentLengths,r=0,s=0;s<this._length;++s){var a=n[s]=E(i[s],i[(s+1)%this._length],t);(s<this._length-1||e)&&(r+=a)}return r}},{key:"_updateArea",value:function(e,t,i,n,r){var s=e.renderCoordsHelper,a=this.positionsWorldCoords,o=this.positionsRenderCoords,c=this.positionsProjectedWorldCoords,h=this.positionsFittedRenderCoords,l=this._planeWorldCoords,u=this._centroidRenderCoords;Object(I.a)(o,u),s.worldUpAtPosition(u,this._worldUp),s.worldBasisAtPosition(u,0,this._worldTangent),Object(v.r)(u,this._worldUp,i,this._worldUp,n),Object(v.r)(u,this._worldTangent,i,this._worldTangent,n),a.length>2&&function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");Object(S.j)(e[0],e[1],e[2],t)}(a,l),this.fittingMode=this._selectFittingMode(l,a,this._worldUp,r);var d=0;if("horizontal"===this.fittingMode){var p=-1/0;o.forEach((function(e,t){var i=s.getAltitude(o[t]);i>p&&(p=i,d=t)}))}var g=a[d],f=l,b=this._worldTangent;"horizontal"===this.fittingMode?f=this._worldUp:"vertical"===this.fittingMode&&(f=this._tempVec3,b=this._worldUp,Object(S.g)(l,this._worldUp,f)),Object(_.m)(this._frame[2],f),Object(S.g)(b,f,this._frame[0]),Object(_.i)(this._frame[1],this._frame[0],this._frame[2]),Object(_.u)(this._frame[1],this._frame[1]);for(var y=this._tempVec3,j=this._tempU,k=this._tempV,V=0;V<this._length;++V){var x=c[V],w=h[V];Object(_.l)(y,a[V],g),Object(O.s)(x,Object(_.j)(this._frame[0],y),Object(_.j)(this._frame[1],y)),Object(_.g)(j,this._frame[0],x[0]),Object(_.g)(k,this._frame[1],x[1]),Object(_.h)(y,j,k),Object(_.h)(y,y,g),Object(v.z)(y,n,w,i)}this.perimeterLength=this._length>0?new m.a(t.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,Object(I.a)(h,this.areaCentroidRenderCoords),Object(v.z)(this.areaCentroidRenderCoords,i,this.areaCentroidWorldCoords,n),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new m.a(t.normalizeArea(this._computeArea()),"square-meters"):null}},{key:"_updateGeodesicArea",value:function(e){var t=e.renderCoordsHelper,i=this.positionsSpherical,n=this.positionsStereographic,r=this._tempVec3,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1e-6,r=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var i=0;i<e.length;++i)if(Object(_.j)(t,e[i])<-n)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&Object(_.m)(t,e[0]),!0;Object(_.y)(T,0,0,0);for(var s=0;s<e.length;++s)Object(_.h)(T,T,e[s]);if(Object(_.t)(T,T),r(e,T))return t&&Object(_.m)(t,T),!0;if(!i)return!1;for(var a=0;a<e.length;++a)for(var o=0;o<e.length;++o)if(a!==o&&(Object(_.i)(T,e[a],e[o]),Object(_.t)(T,T),r(e,T)))return t&&Object(_.m)(t,T),!0;return!1}(i,r);if(s){var a=this._tempU,o=this._tempV;Object(S.n)(r,a,o);for(var c=0;c<this._length;++c){var h=Object(_.j)(i[c],a),l=Object(_.j)(i[c],o),u=Object(_.j)(i[c],r);Object(O.s)(n[c],h/u,l/u)}Object(_.g)(r,r,Object(f.e)(e.spatialReference).radius),t.toRenderCoords(r,Object(f.g)(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=s&&0===this.geodesicIntersectingSegments.size?new m.a(this._computeGeodesicArea(),"square-meters"):null}else this.geodesicArea=null}},{key:"_updatePerimeterLengths",value:function(){for(var e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths,i=0,n=0;n<this._length;++n)i+=t[n]=Object(O.d)(e[n],e[(n+1)%this._length]);return i}},{key:"_updateIntersectingSegments",value:function(){var e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],s=e[(i+1)%this._length],a=e[n],o=e[(n+1)%this._length];Object(w.d)(r,s,a,o)&&(t.add(i),t.add(n))}}},{key:"_computeArea",value:function(){for(var e=this.positionsProjectedWorldCoords,t=F(e,2),i=this.triangleIndices=new Uint32Array(Object(y.a)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=D(e[i[r]],e[i[r+1]],e[i[r+2]]);return n}},{key:"_updateGeodesicIntersectingSegments",value:function(){var e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],s=e[(i+1)%this._length],a=e[n],o=e[(n+1)%this._length];Object(w.d)(r,s,a,o)&&(t.add(i),t.add(n))}}},{key:"_computeGeodesicArea",value:function(){for(var e=this.positionsGeographic,t=F(this.positionsStereographic,2),i=this.geodesicTriangleIndices=new Uint32Array(Object(y.a)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=M(e[i[r]],e[i[r+1]],e[i[r+2]],x.a.WGS84);return n}},{key:"_selectFittingMode",value:function(e,t,i,n){var r=t.map((function(t){return Math.abs(function(e,t){return Object(_.j)(e,t)+e[3]}(e,t))})).reduce((function(e,t){return Math.max(e,t)}),0);!function(e,t){var i=t.center;Object(_.y)(i,0,0,0);for(var n=0;n<e.length;++n)Object(_.h)(i,i,e[n]);Object(_.g)(i,i,1/e.length);for(var r=0,s=0;s<e.length;++s)r=Math.max(r,Object(_.n)(i,e[s]));t.radius=Math.sqrt(r)}(t,this._tempSphere);var s=r/(2*this._tempSphere.radius),a=s<n.maxRelativeErrorCoplanar,o=s<n.maxRelativeErrorAlmostCoplanar,c="horizontal";return a?c="oblique":o&&(c=Math.abs(Object(_.j)(i,e))>Math.cos(Object(b.h)(n.verticalAngleThreshold))?"horizontal":"vertical"),c}}]),e}();function F(e,t){for(var i=new Float64Array(e.length*t),n=0;n<e.length;++n)for(var r=e[n],s=0;s<t;++s)i[n*t+s]=r[s];return i}var W=i(971),Z=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._handles=new g.a,r}return Object(r.a)(i,[{key:"initialize",value:function(){var e=this,t=this.view.spatialReference,i=Object(f.g)(t),n=i===f.a?f.d:i,r=!t||Object(v.b)(t,n)?n:t,s=new W.a(r);this._measurementDataManager=new U(this.view,s),this._handles.add([this.layerViewData.path.on("change",(function(){return e._update()}))]),this._update()}},{key:"destroy",value:function(){this._handles=Object(c.e)(this._handles)}},{key:"_update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.layerViewData,i={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};if(this._measurementDataManager.update(t.path,this.view,t.validMeasurement,i,e)){var n=this._measurementDataManager.getData();this._set("measurementData",n),t.measurementData=n}}}]),i}(p.a);Object(o.a)([Object(h.b)({constructOnly:!0})],Z.prototype,"view",void 0),Object(o.a)([Object(h.b)({constructOnly:!0})],Z.prototype,"analysis",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],Z.prototype,"measurementData",void 0),Object(o.a)([Object(h.b)({constructOnly:!0})],Z.prototype,"layerViewData",void 0),Z=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController")],Z);i(140);var B=i(94),N=i(36),H=i(43),X=i(55),Y=i(57),J=function(){function e(t){Object(n.a)(this,e),this.spatialReference=t}return Object(r.a)(e,[{key:"createVector",value:function(){return this.tag(Object(j.b)())}},{key:"pointToVector",value:function(e){return this.tag(Object(j.f)(e.x,e.y))}},{key:"arrayToVector",value:function(e){return this.tag(Object(j.f)(e[0],e[1]))}},{key:"vectorToArray",value:function(e){return[e[0],e[1]]}},{key:"pointToArray",value:function(e){return[e.x,e.y]}},{key:"vectorToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}},{key:"arrayToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}},{key:"vectorToDehydratedPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}},{key:"lerp",value:function(e,t,i,n){return Object(O.m)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i){e[0]+=t,e[1]+=i}},{key:"distance",value:function(e,t){return Object(O.d)(e,t)}},{key:"getZ",value:function(e,t){return t}},{key:"hasZ",value:function(){return!1}},{key:"getM",value:function(e,t){return t}},{key:"hasM",value:function(){return!1}},{key:"clone",value:function(e){return this.tag(Object(j.e)(e))}},{key:"copy",value:function(e,t){return Object(O.c)(t,e)}},{key:"fromXYZ",value:function(e){return this.tag(Object(j.f)(e[0],e[1]))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(k.g)(e[0],e[1],t)}},{key:"tag",value:function(e){return e}}]),e}(),K=function(){function e(t,i){Object(n.a)(this,e),this.valueType=t,this.spatialReference=i}return Object(r.a)(e,[{key:"createVector",value:function(){return this.tag(Object(k.e)())}},{key:"pointToVector",value:function(e){return this.tag(Object(k.g)(e.x,e.y,0===this.valueType?e.z:e.m))}},{key:"arrayToVector",value:function(e){return this.tag(Object(k.g)(e[0],e[1],e[2]||0))}},{key:"vectorToArray",value:function(e){return[e[0],e[1],e[2]]}},{key:"pointToArray",value:function(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}},{key:"vectorToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=0===this.valueType?e[2]:void 0,t.m=1===this.valueType?e[2]:void 0,t.spatialReference=this.spatialReference,t}},{key:"arrayToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=0===this.valueType?e[2]:void 0,t.m=1===this.valueType?e[2]:void 0,t.spatialReference=this.spatialReference,t}},{key:"vectorToDehydratedPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},i=0===this.valueType,n=1===this.valueType;return t.x=e[0],t.y=e[1],t.z=i?e[2]:void 0,t.m=n?e[2]:void 0,t.hasZ=i,t.hasM=n,t.spatialReference=this.spatialReference,t}},{key:"lerp",value:function(e,t,i,n){return Object(_.k)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i,n){e[0]+=t,e[1]+=i,0===this.valueType&&(e[2]+=n)}},{key:"distance",value:function(e,t){return 0===this.valueType?Object(_.o)(e,t):Object(O.d)(e,t)}},{key:"getZ",value:function(e,t){return 0===this.valueType?e[2]:t}},{key:"hasZ",value:function(){return 0===this.valueType}},{key:"getM",value:function(e,t){return 1===this.valueType?e[2]:t}},{key:"hasM",value:function(){return 1===this.valueType}},{key:"clone",value:function(e){return this.tag(Object(k.f)(e))}},{key:"copy",value:function(e,t){return Object(_.m)(t,e)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(k.g)(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:i))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.tag(Object(k.g)(e[0],e[1],0===this.valueType?e[2]:t))}},{key:"tag",value:function(e){return e}}]),e}(),Q=function(){function e(t){Object(n.a)(this,e),this.spatialReference=t}return Object(r.a)(e,[{key:"createVector",value:function(){return this.tag(Object(V.e)())}},{key:"pointToVector",value:function(e){return this.tag(Object(V.g)(e.x,e.y,e.z,e.m))}},{key:"arrayToVector",value:function(e){return this.tag(Object(V.g)(e[0],e[1],e[2]||0,e[3]||0))}},{key:"vectorToArray",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"pointToArray",value:function(e){return[e.x,e.y,e.z,e.m]}},{key:"vectorToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}},{key:"arrayToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.a;return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}},{key:"vectorToDehydratedPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}},{key:"lerp",value:function(e,t,i,n){return Object(X.j)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i,n){e[0]+=t,e[1]+=i,e[2]+=n}},{key:"distance",value:function(e,t){return Object(_.o)(e,t)}},{key:"getZ",value:function(e){return e[2]}},{key:"hasZ",value:function(){return!0}},{key:"getM",value:function(e){return e[3]}},{key:"hasM",value:function(){return!0}},{key:"clone",value:function(e){return this.tag(Object(V.d)(e))}},{key:"copy",value:function(e,t){return Object(X.c)(t,e)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(V.g)(e[0],e[1],e.length>2?e[2]:t,i))}},{key:"toXYZ",value:function(e){return Object(k.g)(e[0],e[1],e[2])}},{key:"tag",value:function(e){return e}}]),e}();function $(e,t,i){return e&&t?new Q(i):t?new K(1,i):e?new K(0,i):new J(i)}var ee=i(11),te=i(115),ie=i(201),ne=i(58);var re=function(){function e(t){Object(n.a)(this,e),this.component=t,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}return Object(r.a)(e,[{key:"pos",get:function(){return this._pos},set:function(e){this._pos=e,this.component.unnormalizeVertexPositions()}}]),e}(),se=function e(t,i,r){Object(n.a)(this,e),this.component=t,this.leftVertex=i,this.rightVertex=r,this.type="edge",i.rightEdge=this,r.leftEdge=this},ae=function(){function e(t,i){Object(n.a)(this,e),this.spatialReference=t,this.viewingMode=i,this.vertices=[],this.edges=[]}return Object(r.a)(e,[{key:"unnormalizeVertexPositions",value:function(){this.vertices.length<=1||function(e,t){if(t.supported){var i=1/0,n=-1/0,r=t.upperBoundX-t.lowerBoundX;e.forEach((function(e){for(var s=e.pos[0];s<t.lowerBoundX;)s+=r;for(;s>t.upperBoundX;)s-=r;i=Math.min(i,s),n=Math.max(n,s),e.pos[0]=s}));var s=n-i;r-s<s&&e.forEach((function(e){e.pos[0]<0&&(e.pos[0]+=r)}))}}(this.vertices,function(e,t){var i=Object(ne.e)(e);return 1===t&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this.spatialReference,this.viewingMode))}},{key:"updateVertexIndex",value:function(e,t){if(0!==this.vertices.length){var i=this.vertices[0],n=null,r=e,s=t;do{(n=r).index=s++,r=n.rightEdge?n.rightEdge.rightVertex:null}while(null!=r&&r!==i);n.leftEdge&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}}},{key:"getFirstVertex",value:function(){return 0===this.vertices.length?null:this.vertices[0]}},{key:"getLastVertex",value:function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}},{key:"isClosed",value:function(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}},{key:"swapVertices",value:function(e,t){var i=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=i}},{key:"iterateVertices",value:function(e){if(0!==this.vertices.length){var t=this.vertices[0],i=t;do{e(i,i.index),i=Object(c.k)(i.rightEdge)?i.rightEdge.rightVertex:null}while(i!==t&&null!=i)}}}]),e}(),oe=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e,r,s){var a;return Object(n.a)(this,i),(a=t.call(this)).type=e,a.coordinateHelper=r,a.viewingMode=s,a._geometry=null,a.dirty=!0,a.components=[],a}return Object(r.a)(i,[{key:"geometry",get:function(){if(this.dirty){switch(this.type){case"point":this._geometry=this.toPoint();break;case"polyline":this._geometry=this.toPolyline();break;case"polygon":this._geometry=this.toPolygon()}this.dirty=!1}return this._geometry}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}},{key:"notifyChanges",value:function(e){this.dirty=!0,this.emit("change",e)}},{key:"toPoint",value:function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}},{key:"toPolyline",value:function(){var e=[],t=this.coordinateHelper.vectorToArray;return this.components.forEach((function(i,n){var r=[],s=i.vertices.find((function(e){return null==e.leftEdge})),a=s;do{r.push(t(s.pos)),s=s.rightEdge?s.rightEdge.rightVertex:null}while(s&&s!==a);e.push(r)})),new ie.a({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}},{key:"toPolygon",value:function(){var e=[],t=this.coordinateHelper.vectorToArray;return this.components.forEach((function(i,n){var r=[],s=i.vertices[0],a=s,o=a;do{r.push(t(a.pos)),a=Object(c.k)(a.rightEdge)?a.rightEdge.rightVertex:null}while(a&&a!==o);i.isClosed()&&r.push(t(s.pos)),e.push(r)})),new C.a({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}}],[{key:"fromGeometry",value:function(e,t){var n=e.spatialReference,r=$(e.hasZ,e.hasM,n),s=new i(e.type,r,t);switch(e.type){case"polygon":for(var a=e.rings,o=0;o<a.length;++o){for(var c=a[o],h=new ae(n,t),l=c.length>2&&Object(te.e)(c[0],c[c.length-1]),u=l?c.length-1:c.length,d=0;d<u;++d){var p=r.arrayToVector(c[d]),g=new re(h);h.vertices.push(g),g.pos=p,g.index=d}for(var v=h.vertices.length-1,f=0;f<v;++f){var b=h.vertices[f],m=h.vertices[f+1],y=new se(h,b,m);h.edges.push(y)}if(l){var O=new se(h,h.vertices[h.vertices.length-1],h.vertices[0]);h.edges.push(O)}s.components.push(h)}break;case"polyline":var j,_=Object(ee.a)(e.paths);try{for(_.s();!(j=_.n()).done;){for(var k=j.value,V=new ae(n,t),x=k.length,w=0;w<x;++w){var L=r.arrayToVector(k[w]),C=new re(V);V.vertices.push(C),C.pos=L,C.index=w}for(var P=V.vertices.length-1,S=0;S<P;++S){var E=V.vertices[S],D=V.vertices[S+1],M=new se(V,E,D);V.edges.push(M)}s.components.push(V)}}catch(A){_.e(A)}finally{_.f()}break;case"point":var G=new ae(n,t),z=new re(G);z.index=0,z.pos=r.pointToVector(e),G.vertices.push(z),s.components.push(G)}return s}}]),i}(B.a),ce=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.component=i,this.pos=r,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}return Object(r.a)(e,[{key:"apply",value:function(){var e="redo";Object(c.j)(this.addedVertex)&&(e="apply",this.addedVertex=new re(this.component));var t=this.component.getLastVertex();if(Object(c.j)(t))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{var i=null;t.rightEdge&&(this.originalEdge=t.rightEdge,i=this.originalEdge.rightVertex,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(c.j)(this.left)&&(this.left=new se(this.component,t,this.addedVertex)),this.component.edges.push(this.left),t.rightEdge=this.left,Object(c.k)(this.originalEdge)&&Object(c.k)(i)&&(Object(c.j)(this.right)&&(this.right=new se(this.component,this.addedVertex,i)),this.component.edges.push(this.right),i.leftEdge=this.right),this.component.updateVertexIndex(this.addedVertex,t.index+1)}this.editGeometry.notifyChanges({operation:e,addedVertices:[this.addedVertex]})}},{key:"undo",value:function(){if(Object(c.j)(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(c.k)(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.leftVertex.rightEdge=null),Object(c.k)(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.rightVertex.leftEdge=null),Object(c.k)(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.leftVertex.rightEdge=this.originalEdge,this.originalEdge.rightVertex.leftEdge=this.originalEdge),Object(c.k)(this.left)?this.component.updateVertexIndex(this.left.leftVertex,this.left.leftVertex.index):this.component.updateVertexIndex(this.addedVertex,0),this.editGeometry.notifyChanges({operation:"undo",removedVertices:[this.addedVertex]})}},{key:"accumulate",value:function(){return!1}}]),e}(),he=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.vertices=i,this.operation=r,this.undone=!1}return Object(r.a)(e,[{key:"apply",value:function(){var e=this;this.vertices.forEach((function(t){return e.operation.apply(t)})),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()})),this.editGeometry.notifyChanges({operation:this.undone?"redo":"apply",updatedVertices:this.vertices})}},{key:"undo",value:function(){var e=this;this.vertices.forEach((function(t){return e.operation.undo(t)})),this.editGeometry.notifyChanges({operation:"undo",updatedVertices:this.vertices}),this.undone=!0}},{key:"canAccumulate",value:function(e){if(this.undone||e.vertices.length!==this.vertices.length)return!1;for(var t=0;t<e.vertices.length;++t)if(e.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(e.operation)}},{key:"accumulate",value:function(t){var i=this;return!!(t instanceof e&&this.canAccumulate(t))&&(this.vertices.forEach((function(e){return i.operation.accumulate(e,t.operation)})),this.operation.accumulateParams(t.operation),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()})),this.editGeometry.notifyChanges({operation:"apply",updatedVertices:this.vertices}),!0)}}]),e}(),le=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(n.a)(this,e),this.editGeometry=t,this.vertices=i,this.minNumberOfVertices=r,this.removedVertices=null}return Object(r.a)(e,[{key:"apply",value:function(){var e=this,t="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach((function(t){var i=e._removeVertex(t);Object(c.k)(i)&&e.removedVertices.push(i)})),t="apply"):this.removedVertices.forEach((function(t){e._removeVertex(t.removedVertex)})),this.editGeometry.notifyChanges({operation:t,removedVertices:this.vertices})}},{key:"undo",value:function(){var e=this;this.removedVertices.forEach((function(t){e._undoRemoveVertex(t)})),this.editGeometry.notifyChanges({operation:"undo",addedVertices:this.vertices})}},{key:"accumulate",value:function(){return!1}},{key:"_removeVertex",value:function(e){var t=e.component;if(t.vertices.length<=this.minNumberOfVertices)return null;var i={removedVertex:e,createdEdge:null},n=e.leftEdge,r=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),n&&(t.edges.splice(t.edges.indexOf(n),1),n.leftVertex.rightEdge=null),r&&(t.edges.splice(t.edges.indexOf(r),1),r.rightVertex.leftEdge=null),0===e.index&&r&&this.vertices.length>0&&t.swapVertices(t.vertices.indexOf(r.rightVertex),0),n&&r&&(i.createdEdge=new se(t,n.leftVertex,r.rightVertex),t.edges.push(i.createdEdge)),r&&t.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),i}},{key:"_undoRemoveVertex",value:function(e){var t=e.removedVertex,i=e.removedVertex.component,n=t.leftEdge,r=t.rightEdge;e.createdEdge&&i.edges.splice(i.edges.indexOf(e.createdEdge),1),i.vertices.push(t),n&&(i.edges.push(n),n.leftVertex.rightEdge=n),r&&(i.edges.push(r),r.rightVertex.leftEdge=r),i.updateVertexIndex(t,t.index)}}]),e}(),ue=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.edge=i,this.t=r,this.createdVertex=null,this.left=null,this.right=null}return Object(r.a)(e,[{key:"apply",value:function(){var e="redo",t=this.edge,i=t.component,n=t.leftVertex,r=t.rightVertex;i.edges.splice(i.edges.indexOf(t),1),Object(c.j)(this.createdVertex)&&(e="apply",this.createdVertex=new re(t.component)),i.vertices.push(this.createdVertex),this.createdVertex.pos=this.editGeometry.coordinateHelper.lerp(t.leftVertex.pos,t.rightVertex.pos,this.t,this.editGeometry.coordinateHelper.createVector()),Object(c.j)(this.left)&&(this.left=new se(i,n,this.createdVertex)),this.left.leftVertex.leftEdge?i.edges.push(this.left):i.edges.unshift(this.left),n.rightEdge=this.left,Object(c.j)(this.right)&&(this.right=new se(i,this.createdVertex,r)),i.edges.push(this.right),r.leftEdge=this.right,i.updateVertexIndex(this.createdVertex,n.index+1),this.editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}},{key:"undo",value:function(){if(Object(c.j)(this.createdVertex)||Object(c.j)(this.left)||Object(c.j)(this.right))return null;var e=this.edge,t=e.component,i=this.createdVertex.leftEdge,n=this.createdVertex.rightEdge,r=i.leftVertex,s=n.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this.left),1),t.edges.splice(t.edges.indexOf(this.right),1),this.edge.leftVertex.leftEdge?t.edges.push(this.edge):t.edges.unshift(this.edge),r.rightEdge=e,s.leftEdge=e,t.updateVertexIndex(r,r.index),this.editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}},{key:"accumulate",value:function(){return!1}}]),e}(),de=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.vertex=i,this.pos=r}return Object(r.a)(e,[{key:"apply",value:function(){var e=Object(c.j)(this.originalPosition);e&&(this.originalPosition=this.vertex.pos),this._apply(e?"apply":"redo")}},{key:"undo",value:function(){this.vertex.pos=Object(c.t)(this.originalPosition),this.editGeometry.notifyChanges({operation:"undo",updatedVertices:[this.vertex]})}},{key:"accumulate",value:function(t){return t instanceof e&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply("apply"),!0)}},{key:"_apply",value:function(e){this.vertex.pos=this.pos,this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()})),this.editGeometry.notifyChanges({operation:e,updatedVertices:[this.vertex]})}}]),e}(),pe=function(){function e(t,i){Object(n.a)(this,e),this.editGeometry=t,this.component=i,this.createdEdge=null}return Object(r.a)(e,[{key:"apply",value:function(){var e="redo";if(Object(c.j)(this.createdEdge)){e="apply";var t=this.component.getFirstVertex(),i=this.component.getLastVertex();if(this.component.isClosed()||this.component.vertices.length<3||Object(c.j)(t)||Object(c.j)(i))return;this.createdEdge=new se(this.component,i,t)}this.createdEdge.leftVertex.rightEdge=this.createdEdge,this.createdEdge.rightVertex.leftEdge=this.createdEdge,this.component.edges.push(this.createdEdge),this.editGeometry.notifyChanges({operation:e})}},{key:"undo",value:function(){Object(c.j)(this.createdEdge)||(Object(te.j)(this.component.edges,this.createdEdge),this.createdEdge.leftVertex.rightEdge=null,this.createdEdge.rightVertex.leftEdge=null,this.editGeometry.notifyChanges({operation:"undo"}))}},{key:"accumulate",value:function(){return!1}}]),e}(),ge=function(){function e(t,i,r,s){Object(n.a)(this,e),this.helper=t,this.dx=i,this.dy=r,this.dz=s}return Object(r.a)(e,[{key:"move",value:function(e,t,i,n){this.helper.addDelta(e.pos,t,i,n)}},{key:"apply",value:function(e){this.move(e,this.dx,this.dy,this.dz)}},{key:"undo",value:function(e){this.move(e,-this.dx,-this.dy,-this.dz)}},{key:"canAccumulate",value:function(t){return t instanceof e}},{key:"accumulate",value:function(e,t){this.move(e,t.dx,t.dy,t.dz)}},{key:"accumulateParams",value:function(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}]),e}(),ve=i(29),fe=i(41),be=i(236);function me(e,t){return e[0]*t[1]-e[1]*t[0]}var ye=1e-6,Oe=Object(j.b)(),je=Object(j.b)(),_e=Object(j.b)(),ke=Object(j.b)(),Ve=function(){function e(t,i,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(n.a)(this,e),this.helper=t,this.planeType=i,this.edge=r,this.distance=s,this._plane=Object(fe.d)(),this._offsetPlane=Object(fe.d)(),this._minDistance=-1/0,this._maxDistance=1/0,0===a&&this._initialize()}return Object(r.a)(e,[{key:"plane",get:function(){return this._plane}},{key:"requiresSplitEdgeLeft",get:function(){return!this._left.isOriginalDirection}},{key:"requiresSplitEdgeRight",get:function(){return!this._right.isOriginalDirection}},{key:"edgeDirection",get:function(){return this._edgeDirection}},{key:"_initialize",value:function(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}},{key:"_initializeNeighbors",value:function(){var e,t,i,n,r=this._toXYZ(this.edge.leftVertex.pos),s=this._toXYZ(null==(e=this.edge.leftVertex.leftEdge)||null==(t=e.leftVertex)?void 0:t.pos),a=this._toXYZ(this.edge.rightVertex.pos),o=this._toXYZ(null==(i=this.edge.rightVertex.rightEdge)||null==(n=i.rightVertex)?void 0:n.pos);this._edgeDirection=Object(_.x)(Object(k.e)(),r,a),this._left=this._computeNeighbor(r,s,this._edgeDirection),this._right=this._computeNeighbor(a,o,this._edgeDirection)}},{key:"_toXYZ",value:function(e){return Object(c.k)(e)?this.helper.toXYZ(e):null}},{key:"_computeNeighbor",value:function(e,t,i){if(Object(c.j)(t))return{start:e,end:t,direction:Object(k.g)(-i[1],i[0],0),isOriginalDirection:!0};var n=Object(_.x)(Object(k.e)(),e,t),r=!this._passesBisectingAngleThreshold(n,i);return{start:e,end:t,direction:r?this._bisectVectorsPerpendicular(i,n):n,isOriginalDirection:!r}}},{key:"_passesBisectingAngleThreshold",value:function(e,t){var i=Math.abs(Object(be.a)(t,e));return i>=xe&&i<=Math.PI-xe}},{key:"_bisectVectorsPerpendicular",value:function(e,t){var i=Object(_.j)(e,t)<0?e:Object(_.u)(Object(k.e)(),e),n=Math.abs(Object(_.j)(i,t));if(!(n<.001||n>.999))return this._bisectDirection(i,t);var r=Object(_.i)(Object(k.e)(),i,[0,0,1]);return Object(_.t)(r,r)}},{key:"_bisectDirection",value:function(e,t){var i=Object(_.h)(Object(k.e)(),e,t);return Object(_.t)(i,i)}},{key:"_initializePlane",value:function(){var e=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);Object(_.j)(e,t)<0&&Object(_.u)(t,t),Object(fe.h)(this._left.start,this._bisectDirection(e,t),this._plane)}},{key:"_computeNormalDirection",value:function(e){var t=Object(_.i)(Object(k.e)(),e.direction,this._edgeDirection);Object(_.t)(t,t);var i=Object(_.i)(Object(k.e)(),this._edgeDirection,t);return 1===this.planeType&&(i[2]=0),Object(_.t)(i,i)}},{key:"_initializeDistanceConstraints",value:function(){Object(c.k)(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(Object(fe.v)(this._plane,this._left.end)),Object(c.k)(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(Object(fe.v)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}},{key:"_updateDistanceConstraint",value:function(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}},{key:"_updateIntersectDistanceConstraint",value:function(e){var t=Object(fe.r)(e),i=this._edgeDirection,n=Object(_.h)(Object(k.e)(),this._left.start,this._left.direction),r=Object(_.h)(Object(k.e)(),this._right.start,this._right.direction),s=this._pointInBasis2D(Object(j.b)(),t,i,this._left.start),a=this._pointInBasis2D(Object(j.b)(),t,i,n),o=this._pointInBasis2D(Object(j.b)(),t,i,this._right.start),c=function(e,t){var i=e.start,n=e.end,r=t.start,s=t.end,a=Object(O.a)(Oe,n,i),o=Object(O.a)(je,s,r),c=me(a,o);if(Math.abs(c)<=ye)return[];var h=Object(O.a)(_e,i,r),l=me(o,h)/c,u=me(a,h)/c;if(l>=0){if(u>=0||1===t.type)return[Object(O.u)(ke,i,a,l)]}else if(1===e.type&&(u>=0||1===t.type))return[Object(O.u)(ke,i,a,l)];return[]}({start:a,end:s,type:1},{start:this._pointInBasis2D(Object(j.b)(),t,i,r),end:o,type:1}),h=Object(ve.a)(c,1)[0];if(h){var l=Object(O.a)(Object(j.b)(),s,a);Object(O.f)(l,l);var u=Object(O.a)(Object(j.b)(),h,a),d=Object(O.h)(l,u),p=Object(_.h)(Object(k.e)(),n,Object(_.g)(Object(k.e)(),this._left.direction,-d)),g=Object(fe.v)(e,p);this._updateDistanceConstraint(g)}}},{key:"_pointInBasis2D",value:function(e,t,i,n){return e[0]=Object(be.c)(t,n),e[1]=Object(be.c)(i,n),e}},{key:"_offset",value:function(e,t){var i=this;Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),Object(fe.c)(this._plane,this._offsetPlane),this._offsetPlane[3]-=t;var n=function(e,t,n){return Object(c.k)(t)&&Object(fe.k)(i._offsetPlane,e,Object(_.h)(Object(k.e)(),e,t),n)},r=Object(k.e)();(e===this.edge.leftVertex?n(this._left.start,this._left.direction,r):n(this._right.start,this._right.direction,r))&&this.helper.copy(this.helper.fromXYZ(r,void 0,this.helper.getM(e.pos)),e.pos)}},{key:"signedDistanceToPoint",value:function(e){return Object(fe.v)(this.plane,this.helper.toXYZ(this.helper.pointToVector(e)))}},{key:"apply",value:function(e){this._offset(e,this.distance)}},{key:"undo",value:function(e){this._offset(e,0)}},{key:"canAccumulate",value:function(t){return t instanceof e&&this.edge.leftVertex.index===t.edge.leftVertex.index&&this.edge.rightVertex.index===t.edge.rightVertex.index&&this.edge.component===t.edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&Object(_.F)(Object(fe.r)(this._plane),Object(fe.r)(t._plane))}},{key:"accumulate",value:function(e,t){var i=this._plane[3]-t._plane[3]+t.distance;this._offset(e,i)}},{key:"accumulateParams",value:function(e){var t=e.distance-e._plane[3];this.distance=t+this._plane[3]}},{key:"clone",value:function(){var t=new e(this.helper,this.planeType,this.edge,this.distance,1);return Object(fe.c)(this._plane,t._plane),Object(fe.c)(this._offsetPlane,t._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=Object(_.m)(Object(k.e)(),this._edgeDirection),t}},{key:"_maybeEqualsVec3",value:function(e,t){return Object(c.j)(e)&&Object(c.j)(t)||Object(c.k)(e)&&Object(c.k)(t)&&Object(_.F)(e,t)}},{key:"_cloneNeighbor",value:function(e){var t=e.start,i=e.end,n=e.direction,r=e.isOriginalDirection;return{start:Object(_.m)(Object(k.e)(),t),end:Object(c.k)(i)?Object(_.m)(Object(k.e)(),i):null,direction:Object(_.m)(Object(k.e)(),n),isOriginalDirection:r}}}]),e}(),xe=Object(b.h)(15),we=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(n.a)(this,e),this.origin=t,this.angle=i,this.accumulationType=r}return Object(r.a)(e,[{key:"rotate",value:function(e,t){Object(O.r)(e.pos,e.pos,this.origin,t)}},{key:"apply",value:function(e){this.rotate(e,this.angle)}},{key:"undo",value:function(e){this.rotate(e,-this.angle)}},{key:"canAccumulate",value:function(t){return t instanceof e&&Object(te.e)(this.origin,t.origin)}},{key:"accumulate",value:function(e,t){var i=1===t.accumulationType;this.rotate(e,i?t.angle-this.angle:t.angle)}},{key:"accumulateParams",value:function(e){var t=1===e.accumulationType;this.angle=t?e.angle:this.angle+e.angle}}]),e}(),Le=function(){function e(t,i,r,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(n.a)(this,e),this.origin=t,this.axis1=i,this.factor1=r,this.factor2=s,this.accumulationType=a,this.axis2=Object(j.f)(i[1],-i[0])}return Object(r.a)(e,[{key:"scale",value:function(e,t,i){Object(O.p)(e.pos,e.pos,this.origin,this.axis1,t),Object(O.p)(e.pos,e.pos,this.origin,this.axis2,i)}},{key:"apply",value:function(e){this.scale(e,this.factor1,this.factor2)}},{key:"undo",value:function(e){this.scale(e,1/this.factor1,1/this.factor2)}},{key:"canAccumulate",value:function(t){return t instanceof e&&Object(te.e)(this.origin,t.origin)&&Object(te.e)(this.axis1,t.axis1)}},{key:"accumulate",value:function(e,t){1===t.accumulationType?this.scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this.scale(e,t.factor1,t.factor2)}},{key:"accumulateParams",value:function(e){var t=1===e.accumulationType;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}]),e}(),Ce=function(){function e(){Object(n.a)(this,e),this.operations=[],this.closed=!1}return Object(r.a)(e,[{key:"close",value:function(){this.closed=!0}},{key:"apply",value:function(){var e,t=Object(ee.a)(this.operations);try{for(t.s();!(e=t.n()).done;){e.value.apply()}}catch(i){t.e(i)}finally{t.f()}}},{key:"undo",value:function(){for(var e=this.operations.length-1;e>=0;e--)this.operations[e].undo()}},{key:"accumulate",value:function(e){if(this.closed)return!1;var t=this.operations.length?this.operations[this.operations.length-1]:null;return t&&t.accumulate(e)||(this.operations.push(e),e.apply()),!0}}]),e}(),Pe=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this)).data=e,r.undoStack=[],r.redoStack=[],r.listener=r.data.on("change",(function(e){e.addedVertices&&r.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&r.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&r.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation})})),r}return Object(r.a)(i,[{key:"destroy",value:function(){this.listener.remove()}},{key:"splitEdge",value:function(e,t){return this.apply(new ue(this.data,e,t))}},{key:"updateVertices",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.apply(new he(this.data,e,t),i)}},{key:"moveVertices",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return this.updateVertices(e,new ge(this.data.coordinateHelper,t,i,n),r)}},{key:"scaleVertices",value:function(e,t,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return this.updateVertices(e,new Le(t,i,n,r,a),s)}},{key:"rotateVertices",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.updateVertices(e,new we(t,i,r),n)}},{key:"removeVertices",value:function(e){return this.apply(new le(this.data,e,this._minNumVerticesPerType))}},{key:"appendVertex",value:function(e){return 0===this.data.components.length?null:this.apply(new ce(this.data,this.data.components[0],e))}},{key:"setVertexPosition",value:function(e,t){return this.apply(new de(this.data,e,t))}},{key:"offsetEdge",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.updateVertices([t.leftVertex,t.rightVertex],new Ve(this.data.coordinateHelper,e,t,i),n)}},{key:"closeComponent",value:function(e){return this.data.components.includes(e)?this.apply(new pe(this.data,e)):null}},{key:"canRemoveVertex",value:function(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}},{key:"createUndoGroup",value:function(){var e=new Ce;return this.apply(e),{remove:function(){return e.close()}}}},{key:"undo",value:function(){if(this.undoStack.length>0){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}},{key:"redo",value:function(){if(this.redoStack.length>0){var e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}},{key:"canUndo",get:function(){return this.undoStack.length>0}},{key:"canRedo",get:function(){return this.redoStack.length>0}},{key:"lastOperation",get:function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}},{key:"_minNumVerticesPerType",get:function(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0!==t&&!Object(c.j)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[]),e}}],[{key:"fromGeometry",value:function(e,t){return new i(oe.fromGeometry(e,t))}}]),i}(B.a),Se=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,i),(e=t.call(this,r))._handles=new g.a,e._version=0,e._internalGeometryChange=!1,e._extent=Object(H.n)(),e}return Object(r.a)(i,[{key:"destroy",value:function(){this._handles=Object(c.e)(this._handles)}},{key:"areaMeasurement",set:function(e){this._set("areaMeasurement",e),Object(c.k)(e)&&Object(c.k)(this.view)&&this._initialize(e,this.view)}},{key:"view",set:function(e){this._set("view",e),Object(c.k)(e)&&Object(c.k)(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}},{key:"initialized",get:function(){return Object(c.k)(this.areaMeasurement)&&Object(c.k)(this.view)}},{key:"version",get:function(){return this._version}},{key:"isValidPolygon",get:function(){return this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].isClosed()}},{key:"extent",get:function(){if(this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].vertices.length>0){var e=Object(H.n)(this._extent);return this.forEachVertex((function(t){Object(H.q)(e,t.pos)})),e}return null}},{key:"spatialReference",get:function(){return this.initialized?this.editGeometry.coordinateHelper.spatialReference:null}},{key:"_initialize",value:function(e,t){var i=this;this._handles.removeAll(),this._handles.add(Object(N.a)(e,"geometry",(function(){return i._updateEditGeometryFromModelGeometry(e,t)}),!0)),this._makeDirty(!0)}},{key:"_makeDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.notifyChange("isValidPolygon"),this.notifyChange("initialized"),this.notifyChange("extent"),e&&this.notifyChange("numVertices")}},{key:"_updateEditGeometryFromModelGeometry",value:function(e,t){var i=this;this._version++,this._internalGeometryChange||(this._handles.remove("EditGeometry"),Object(c.k)(e.geometry)?this._editGeometryOperations=Pe.fromGeometry(e.geometry,t.state.viewingMode):this._editGeometryOperations=new Pe(new oe("polygon",$(!0,!1,t.spatialReference),t.state.viewingMode)),this._makeDirty(!0),this.emit("change",{type:"change"}),this._handles.add(this.editGeometry.on("change",(function(t){i._makeDirty(null!=t.addedVertices||null!=t.removedVertices),i._internalGeometryChange=!0,e.geometry=i.numVertices>0?i.editGeometry.geometry:null,i._internalGeometryChange=!1})),"EditGeometry"))}},{key:"editGeometry",get:function(){return this._editGeometryOperations.data}},{key:"vertices",get:function(){var e=[];return this.forEachVertex((function(t){e.push(t)})),e}},{key:"numVertices",get:function(){return this.initialized&&this.editGeometry.components.length>0?this.editGeometry.components[0].vertices.length:0}},{key:"lastPoint",get:function(){if(this.initialized&&this.editGeometry.components.length>0){var e=this.editGeometry.components[0].getLastVertex();if(Object(c.k)(e))return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}return null}},{key:"getVertex",value:function(e){if(!this.initialized||0===this.editGeometry.components.length||0===this.editGeometry.components[0].vertices.length)return null;var t=this.editGeometry.components[0].vertices[0],i=t;do{if(i.index===e)return i;i=i.rightEdge.rightVertex}while(i!==t&&null!=i);return null}},{key:"getVertexPositionAsPoint",value:function(e){return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}},{key:"getVertexPositionAsPointFromIndex",value:function(e){return this.editGeometry.coordinateHelper.vectorToPoint(this.getVertex(e).pos)}},{key:"forEachVertex",value:function(e){this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].iterateVertices(e)}},{key:"forEachVertexPosition",value:function(e){var t=this.editGeometry.coordinateHelper;this.forEachVertex((function(i,n){t.vectorToPoint(i.pos,Ee),e(Ee,n)}))}},{key:"clear",value:function(){Object(c.k)(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}},{key:"add",value:function(e){if(!this.initialized)return null;if(0===this.editGeometry.components.length){var t=Object(c.t)(this.view);this.editGeometry.components.push(new ae(t.spatialReference,t.state.viewingMode))}var i=this._editGeometryOperations.appendVertex(this.editGeometry.coordinateHelper.pointToVector(e));return this.emit("change",{type:"change"}),i}},{key:"close",value:function(){if(!this.initialized||0===this.editGeometry.components.length)return null;var e=this._editGeometryOperations.closeComponent(this.editGeometry.components[0]);return this.emit("change",{type:"change"}),e}},{key:"ensureContains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!1;if(this.editGeometry.components.forEach((function(t){t.iterateVertices((function(t){t===e&&(i=!0)}))})),!i)throw new Error("vertex doesnt exist ".concat(t));return i}},{key:"setVertexPosition",value:function(e,t){if(!this.initialized)return null;var i=this._editGeometryOperations.setVertexPosition(e,this.editGeometry.coordinateHelper.pointToVector(t));return this.emit("change",{type:"change"}),i}},{key:"equals",value:function(e){if(this.numVertices!==e.numVertices)return!1;var t=!0;return this.forEachVertexPosition((function(i,n){var r=e.getVertexPositionAsPointFromIndex(n);i.equals(r)||(t=!1)})),!!t}}]),i}(B.a.EventedAccessor);Object(o.a)([Object(h.b)({value:null})],Se.prototype,"areaMeasurement",null),Object(o.a)([Object(h.b)({value:null})],Se.prototype,"view",null),Object(o.a)([Object(h.b)()],Se.prototype,"isValidPolygon",null),Object(o.a)([Object(h.b)()],Se.prototype,"extent",null),Object(o.a)([Object(h.b)()],Se.prototype,"spatialReference",null),Object(o.a)([Object(h.b)()],Se.prototype,"numVertices",null),Se=Object(o.a)([Object(l.a)("esri.views.3d.interactive.graphics.AreaMeasurement3D.AreaMeasurement3DPathHelper")],Se);var Ee=new Y.a,De=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(){var e;return Object(n.a)(this,i),(e=t.apply(this,arguments)).measurementData=null,e.unitNormalizer=new W.a,e.path=new Se,e.lastDraggedVertex=null,e}return Object(r.a)(i,[{key:"destroy",value:function(){this.measurementData=null,this.path=Object(c.e)(this.path)}},{key:"validMeasurement",get:function(){return this.path.isValidPolygon}}]),i}(p.a);Object(o.a)([Object(h.b)()],De.prototype,"measurementData",void 0),Object(o.a)([Object(h.b)()],De.prototype,"validMeasurement",null),Object(o.a)([Object(h.b)()],De.prototype,"unitNormalizer",void 0),Object(o.a)([Object(h.b)()],De.prototype,"path",void 0),Object(o.a)([Object(h.b)()],De.prototype,"lastDraggedVertex",void 0),Object(o.a)([Object(h.b)()],De.prototype,"cursorPoint",void 0),De=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement3D.AreaMeasurementLayerViewData")],De);var Me,Ge,ze=i(8),Ae=i.n(ze),Re=i(15),Te=i(14),Ie=(i(382),i(1029)),qe=i(78),Ue=i(218),Fe=i(28),We=i(33);(Ge=Me||(Me={})).boundingSphere=function(e,t){var i=t.center;Object(_.y)(i,0,0,0);for(var n=0;n<e.length;++n)Object(_.h)(i,i,e[n]);Object(_.g)(i,i,1/e.length);for(var r=0,s=0;s<e.length;++s)r=Math.max(r,Object(_.n)(i,e[s]));t.radius=Math.sqrt(r)},Ge.bestFitPlane=function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");Object(S.j)(e[0],e[1],e[2],t)},Ge.planePointDistance=function(e,t){return Object(_.j)(e,t)+e[3]},Ge.segmentLengthEuclidean=function(e,t,i){return Object(v.u)(e,Ze,i)&&Object(v.u)(t,Be,i)?Object(_.o)(Ze,Be):0},Ge.segmentLengthGeodesic=function(e,t){if(!Object(v.v)(e,Ze)||!Object(v.v)(t,Be))return 0;var i={distance:null};return Object(P.b)(i,[Ze[0],Ze[1]],[Be[0],Be[1]]),i.distance},Ge.segmentLengthGeodesicVector=function(e,t,i){var n={distance:null};return Object(P.b)(n,[e[0],e[1]],[t[0],t[1]],i),n.distance},Ge.triangleAreaEuclidean=function(e,t,i){var n=t[0]-e[0],r=t[1]-e[1],s=i[0]-e[0],a=i[1]-e[1];return.5*Math.abs(n*a-r*s)},Ge.triangleAreaGeodesic=function(e,t,i,n){var r=He;return Object(v.A)(e,n,Ze)&&Object(v.A)(t,n,Be)&&Object(v.A)(i,n,Ne)?(r.setPoint(0,0,Ze),r.setPoint(0,1,Be),r.setPoint(0,2,Ne),Math.abs(Object(L.geodesicArea)(r,"square-meters"))):0},Ge.tangentFrame=function(e,t,i){Math.abs(e[0])>Math.abs(e[1])?Object(_.y)(t,0,1,0):Object(_.y)(t,1,0,0),Object(_.i)(i,e,t),Object(_.t)(t,t),Object(_.i)(t,i,e),Object(_.t)(i,i)},Ge.fitHemisphere=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1e-6,r=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var i=0;i<e.length;++i)if(Object(_.j)(t,e[i])<-n)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&Object(_.m)(t,e[0]),!0;Object(_.y)(Xe,0,0,0);for(var s=0;s<e.length;++s)Object(_.h)(Xe,Xe,e[s]);if(Object(_.t)(Xe,Xe),r(e,Xe))return t&&Object(_.m)(t,Xe),!0;if(!i)return!1;for(var a=0;a<e.length;++a)for(var o=0;o<e.length;++o)if(a!==o&&(Object(_.i)(Xe,e[a],e[o]),Object(_.t)(Xe,Xe),r(e,Xe)))return t&&Object(_.m)(t,Xe),!0;return!1},Ge.compareSets=function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(var i=0;i<e.size;++i)if(!t.has(e[i]))return!1;return!0},Ge.isPrimaryPointerAction=function(e){return"mouse"!==e.pointerType||0===e.button};var Ze=Object(k.e)(),Be=Object(k.e)(),Ne=Object(k.e)(),He=new C.a({rings:[[Ze,Be,Ne]],spatialReference:x.a.WGS84}),Xe=Object(k.e)(),Ye=Me,Je=i(1030),Ke=i(1056),Qe=i(876),$e=i(843),et=i(131),tt=i(219),it=i(133),nt=i(276),rt=i(106),st=i(124),at=i(117),ot=i(86),ct=i(90),ht=i(26),lt=i(75),ut=i(95),dt=i(85),pt=i(973),gt=i(38),vt=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(){return Object(n.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"initializeProgram",value:function(e){var t=i.shader.get(),n=this.configuration,r=t.build({OITEnabled:0===n.transparencyPassType,multipassTerrainEnabled:n.multipassTerrainEnabled,cullAboveGround:n.cullAboveGround});return new dt.a(e.rctx,r,lt.a)}},{key:"bindPass",value:function(e,t){Object(at.c)(this.program,t.camera.projectionMatrix),this.program.setUniform2fv("size",e.size),this.program.setUniform4fv("color1",e.color1),this.program.setUniform4fv("color2",e.color2),t.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",t.camera.nearFar),this.program.setUniform2fv("inverseViewport",t.inverseViewport),Object(st.a)(this.program,t))}},{key:"bindDraw",value:function(e){Object(at.d)(this.program,e)}},{key:"setPipelineState",value:function(e){var t=this.configuration,i=3===e,n=2===e;return Object(gt.g)({blending:t.transparent?i?bt:Object(ut.a)(e):null,depthTest:{func:Object(ut.b)(e)},depthWrite:i?t.writeDepth&&gt.e:Object(ut.c)(e),colorWrite:gt.d,polygonOffset:i||n?t.polygonOffset&&ft:{factor:-1,units:-25}})}},{key:"initializePipeline",value:function(){return this.setPipelineState(this.configuration.transparencyPassType)}}]),i}(ct.a);vt.shader=new ot.a(pt.a,(function(){return i.e(204).then(i.bind(null,1194))}));var ft={factor:0,units:-25},bt=Object(gt.h)(770,1,771,771),mt=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(){var e;return Object(n.a)(this,i),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.polygonOffset=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!1,e}return i}(ht.a);Object(o.a)([Object(ht.b)()],mt.prototype,"transparent",void 0),Object(o.a)([Object(ht.b)()],mt.prototype,"writeDepth",void 0),Object(o.a)([Object(ht.b)()],mt.prototype,"polygonOffset",void 0),Object(o.a)([Object(ht.b)({count:4})],mt.prototype,"transparencyPassType",void 0),Object(o.a)([Object(ht.b)()],mt.prototype,"multipassTerrainEnabled",void 0),Object(o.a)([Object(ht.b)()],mt.prototype,"cullAboveGround",void 0);var yt=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e,jt)).techniqueConfig=new mt,r}return Object(r.a)(i,[{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!e&&e.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!e&&e.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,i,n,r,s,a){return Object(rt.i)(e,t,n,r,s,void 0,a)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output?new Ot(e):void 0}},{key:"createBufferWriter",value:function(){return new nt.a(nt.d)}}]),i}(it.a),Ot=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e)).updateParameters(),r}return Object(r.a)(i,[{key:"updateParameters",value:function(e){this._technique=this._techniqueRep.releaseAndAcquire(vt,this._material.getTechniqueConfig(e),this._technique)}},{key:"beginSlot",value:function(e){var t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t||23===e}},{key:"ensureParameters",value:function(e){this.updateParameters(e)}},{key:"bind",value:function(e){this._technique.bindPass(this._material.getPassParameters(),e)}}]),i}(tt.a),jt=Object(Te.a)({size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1},it.b),_t=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._checkerBoardMaterial=null,r._renderOccluded=4,r._geometry=null,r._size=[1,1],r._color1=Object(V.g)(1,.5,0,.5),r._color2=Object(V.g)(1,1,1,.5),r.applyProps(e),r}return Object(r.a)(i,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){Object(X.g)(e,this._color1)||(Object(X.c)(this._color1,e),this.updateMaterial())}},{key:"color2",get:function(){return this._color2},set:function(e){Object(X.g)(e,this._color2)||(Object(X.c)(this._color2,e),this.updateMaterial())}},{key:"updateMaterial",value:function(){Object(c.k)(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}},{key:"createExternalResources",value:function(){this._checkerBoardMaterial=new yt({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}},{key:"destroyExternalResources",value:function(){this._checkerBoardMaterial=null}},{key:"forEachExternalMaterial",value:function(e){Object(c.k)(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)}},{key:"createGeometries",value:function(e){if(!Object(c.j)(this._geometry)&&!Object(c.j)(this._checkerBoardMaterial)){var t=kt;Object(Fe.v)(t,this.transform);var i=this._geometry,n=[],r=Object(k.e)();i.position.forEach((function(e){Object(_.l)(r,e,t),n.push(r[0],r[1],r[2])}));var s=[];i.uv.forEach((function(e){s.push(e[0],e[1])}));var a=new et.a([["position",{size:3,data:n,exclusive:!0}],["uv0",{size:2,data:s,exclusive:!0}]],[["position",i.triangleIndices],["uv0",i.triangleIndices]]);e.addGeometry(a,this._checkerBoardMaterial)}}},{key:"geometryChanged",value:function(){this.recreateGeometry()}}]),i}($e.a),kt=Object(k.e)(),Vt=i(1031),xt=i(363),wt=i(151),Lt=i(274),Ct=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._handles=new g.a,r._params=Object(Te.a)({},Pt),r._path=null,r._intersectedPath=null,r._perimeter=null,r._intersectedPerimeter=null,r._projectionLines=null,r._measurementArea=null,r._areaLabel=null,r._pathLengthLabel=null,r._cursorSegmentLengthLabel=null,r._perimeterLengthLabel=null,r._pathSegments=[],r._perimeterSegments=[],r._cursorSegment=null,r._origin=Object(k.e)(),r._originTransform=Object(We.d)(),r._cursorPositionRenderSpace=Object(k.e)(),r.messages=null,r.viewData=St,r.areaLabel=null,r.perimeterLengthLabel=null,r.mode=0,r.loadingMessages=!0,r.geodesicMeasurementDistanceThreshold=1e5,r}return Object(r.a)(i,[{key:"visible",get:function(){return this.layerView.visible&&!this.layerView.suspended}},{key:"testData",get:function(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}},{key:"initialize",value:function(){var e=this,t=this.view,i=this._params;this._path=new Qe.a({view:t,attached:!0,width:i.pathLineWidth,color:i.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new Qe.a({view:t,attached:!0,width:i.pathLineWidth,color:i.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new Qe.a({view:t,attached:!0,width:i.perimeterLineWidth,color:i.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new Qe.a({view:t,attached:!0,width:i.perimeterLineWidth,color:i.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new Qe.a({view:t,attached:!0,width:i.projectionLineWidth,color:i.projectionLineColor,stipplePattern:Object(xt.b)(i.projectionLineStippleSize),stippleIntegerRepeats:!1,polygonOffset:!0,renderOccluded:4}),this._measurementArea=new _t({view:t,attached:!0,color1:i.areaColor1,color2:i.areaColor2}),this._areaLabel=new Ke.a({view:this.view,attached:!0,fontSize:16}),this._pathLengthLabel=new Ke.a({view:t,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new Ke.a({view:t,attached:!0,fontSize:12}),this._perimeterLengthLabel=new Ke.a({view:t,attached:!0,fontSize:12});var n=this.layerView,r=n.layerViewData;this._handles.add([Object(Ue.d)((function(){return[e.mode,e.visible,n.unit,r.measurementData,r.cursorPoint]}),(function(){return e._update()})),Object(Ue.d)((function(){var e;return null==(e=t.state)?void 0:e.camera}),(function(){return e._updateLabels()})),Object(wt.c)(Object(Re.a)(Ae.a.mark((function t(){return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._updateMessageBundle());case 1:case"end":return t.stop()}}),t)})))),Object(Ue.d)((function(){return e.layerView.fullOpacity}),(function(){return e._updateVisualElementsOpacity()}))]),this._updateMessageBundle()}},{key:"destroy",value:function(){this._measurementArea=Object(c.e)(this._measurementArea),this._path=Object(c.e)(this._path),this._intersectedPath=Object(c.e)(this._intersectedPath),this._perimeter=Object(c.e)(this._perimeter),this._intersectedPerimeter=Object(c.e)(this._intersectedPerimeter),this._areaLabel=Object(c.e)(this._areaLabel),this._pathLengthLabel=Object(c.e)(this._pathLengthLabel),this._cursorSegmentLengthLabel=Object(c.e)(this._cursorSegmentLengthLabel),this._perimeterLengthLabel=Object(c.e)(this._perimeterLengthLabel),this._handles=Object(c.e)(this._handles),this.set("view",null)}},{key:"_update",value:function(){if(!this.destroyed){var e=this.layerView.layerViewData.measurementData;Object(c.j)(e)||(this._updateViewData(e,this.layerView.layerViewData.path,this.layerView.layerViewData.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}}},{key:"_updateViewData",value:function(e,t,i){var n=t.isValidPolygon,r=t.lastPoint,s=Object(c.k)(r)&&Object(c.k)(i)?new m.a(Ye.segmentLengthGeodesic(r,i),"meters"):null,a=Object(c.k)(r)&&Object(c.k)(i)?new m.a(e.unitNormalizer.normalizeDistance(Ye.segmentLengthEuclidean(r,i,e.unitNormalizer.spatialReference)),"meters"):null,o=this.mode;0===this.mode&&(o=1,(e.geodesicPathLength?e.geodesicPathLength.value:0)+(!n&&Object(c.k)(s)?s.value:0)>this.geodesicMeasurementDistanceThreshold&&(o=2)),null==e.geodesicPathLength&&(o=1);var h=2===o,l=h?e.geodesicArea:e.area,u=1;if(l){var d=this._toPreferredAreaUnit(l,this.layerView.unit);u=Object(b.o)(Math.sqrt(d.value)/Math.sqrt(300)),u*=Math.sqrt(Object(qe.c)(1,d.unit,"square-meters")),u/=e.unitNormalizer.normalizeDistance(1)}var p={validMeasurement:n,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:o,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:h?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:h?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:h?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:n?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:u,geodesicCursorSegmentLength:s,cursorSegmentLength:a};this._set("viewData",p)}},{key:"_updateOrigin",value:function(){var e=this.viewData;Object(Je.a)(e.positionsRenderCoords,this._origin),Object(Fe.i)(this._originTransform),Object(Fe.t)(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}},{key:"_createSegments",value:function(e){for(var t=this.viewData,i=t.path,n=this.view.renderCoordsHelper.spatialReference,r=t.mode,s=[],a=[],o=[],c=t.validMeasurement?i.numVertices:i.numVertices-1,h=0;h<c;++h){var l=t[e][h],u=t[e][(h+1)%i.numVertices],d=null;switch(r){case 1:d=new Vt.a(l,u);break;case 2:d=new Vt.b(l,u,n)}t.intersectingSegments.has(h)?o.push(d):a.push(d),s.push(d)}return{all:s,nonIntersecting:a,intersecting:o}}},{key:"_updatePathSegments",value:function(){var e=this.visible,t=this.viewData,i=this._createSegments("positionsRenderCoords"),n=t.path,r=!n.isValidPolygon,s=t.cursorPoint,a=this.view.renderCoordsHelper,o=a.spatialReference,h=t.mode;if(this._cursorSegment=null,n.numVertices>0&&r&&Object(c.k)(s)&&a.toRenderCoords(s,this._cursorPositionRenderSpace)){var l=t.positionsRenderCoords[n.numVertices-1],u=this._cursorPositionRenderSpace,d=null;switch(h){case 1:d=new Vt.a(l,u);break;case 2:d=new Vt.b(l,u,o)}i.nonIntersecting.push(d),this._cursorSegment=d}this._path.setGeometryFromSegments(i.nonIntersecting,this._origin),this._path.visible=e,this._intersectedPath.setGeometryFromSegments(i.intersecting,this._origin),this._intersectedPath.visible=e,this._pathSegments=i.all}},{key:"_updatePerimeterSegments",value:function(){var e=this.visible&&1===this.viewData.mode,t=this._createSegments("positionsFittedRenderCoords");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}},{key:"_updateArea",value:function(){var e=this.viewData;switch(e.mode){case 1:this._updateAreaEuclidean(e);break;case 2:this._updateAreaGeodesic()}}},{key:"_updateAreaEuclidean",value:function(e){var t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}},{key:"_updateAreaGeodesic",value:function(){this._measurementArea.visible=!1}},{key:"_updateProjectionLines",value:function(){var e=this.viewData,t=this.visible,i=e.path,n=e.mode;if(i.numVertices>0&&e.validMeasurement&&1===n){for(var r=[],s=0;s<i.numVertices;++s){var a=Object(k.e)();Object(_.l)(a,e.positionsRenderCoords[s],this._origin);var o=Object(k.e)();Object(_.l)(o,e.positionsFittedRenderCoords[s],this._origin),r.push([a,o])}this._projectionLines.geometry=r,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}},{key:"_updateLabels",value:function(){if(!this.destroyed){var e=this.viewData,t=e.path;if(t){var i=e.measurementData,n=e.mode,r=!t.isValidPolygon,s=this.visible,a=this._formatAreaLabel(this.messages,2===n?i.geodesicArea:i.area,this.layerView.unit);Object(c.k)(a)?(this._areaLabel.geometry={type:"point",point:e.areaCentroid},this._areaLabel.text=a,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&s):this._areaLabel.visible=!1,this._set("areaLabel",Object(c.t)(a));var o=this._formatLengthLabel(this.messages,2===n?i.geodesicPathLength:i.pathLength,this.layerView.unit);if(Object(c.k)(o)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){var h=this._pathSegments[e.pathLengthLabelSegmentIndex],l=Object(c.k)(this._cursorSegment)?this._cursorSegment:Et;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:"corner",left:h,right:l},this._pathLengthLabel.text=o,this._pathLengthLabel.visible=r&&t.numVertices>0&&s}else this._pathLengthLabel.visible=!1;var u=2===n?e.geodesicCursorSegmentLength:e.cursorSegmentLength;if(Object(c.k)(u)){var d=this._formatLengthLabel(this.messages,u,this.layerView.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=Object(c.k)(this._cursorSegment)?{type:"segment",segment:this._cursorSegment,sampleLocation:"end"}:null,this._cursorSegmentLengthLabel.anchor="bottom",this._cursorSegmentLengthLabel.text=Object(c.t)(d),this._cursorSegmentLengthLabel.visible=r&&0!==u.value&&s}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);var p=2===e.mode,g=p?i.geodesicPathLength:i.perimeterLength,v=Object(c.t)(null!=g?this._formatLengthLabel(this.messages,g,this.layerView.unit):null);if(this._set("perimeterLengthLabel",Object(c.t)(v)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor="top",this._perimeterLengthLabel.text=v,this._perimeterLengthLabel.visible=!0;for(var f=!0,b=0;b<e.path.numVertices;++b){var m=(e.perimeterLengthLabelSegmentIndex+b)%e.path.numVertices,y=p?this._pathSegments[m]:this._perimeterSegments[m];if(f=!0,this._perimeterLengthLabel.geometry={type:"segment",segment:y,sampleLocation:"center"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;f=!1}this._perimeterLengthLabel.visible=f&&s}else this._perimeterLengthLabel.visible=!1}}}},{key:"_toPreferredAreaUnit",value:function(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}},{key:"_preferredAreaUnit",value:function(e,t){switch(t){case"metric":return Object(qe.r)(e.value,e.unit);case"imperial":return Object(qe.o)(e.value,e.unit);default:return t}}},{key:"_preferredLengthUnit",value:function(e,t){var i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case"metric":return Object(qe.s)(e.value,e.unit);case"imperial":return Object(qe.p)(e.value,e.unit);default:return i}}},{key:"_deriveLengthUnitFromAreaUnit",value:function(e){switch(e){case"metric":case"ares":case"hectares":return"metric";case"imperial":case"acres":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";case"square-meters":return"meters";case"square-kilometers":return"kilometers"}throw new Error("unhandled area unit")}},{key:"_formatAreaLabel",value:function(e,t,i){return e&&t&&Object(Ie.b)(e,t,this._preferredAreaUnit(t,i))}},{key:"_formatLengthLabel",value:function(e,t,i){return e&&t&&Object(Ie.b)(e,t,this._preferredLengthUnit(t,i))}},{key:"_updateMessageBundle",value:function(){var e=this;this.loadingMessages=!0,Object(Lt.a)("esri/core/t9n/Units").then((function(t){e.messages=t,e.view&&e._update()})).finally((function(){e.loadingMessages=!1}))}},{key:"_updateVisualElementsOpacity",value:function(){var e=this.layerView.fullOpacity,t=this._params,i=t.pathLineColor,n=t.intersectingLineColor,r=t.perimeterLineColor,s=t.projectionLineColor,a=t.areaColor1,o=t.areaColor2;this._path.color=Object(b.c)(Dt,i,e),Object(b.c)(Dt,n,e),this._intersectedPath.color=Dt,this._intersectedPerimeter.color=Dt,this._perimeter.color=Object(b.c)(Dt,r,e),this._projectionLines.color=Object(b.c)(Dt,s,e),this._measurementArea.color1=Object(b.c)(Dt,a,e),this._measurementArea.color2=Object(b.c)(Dt,o,e)}}]),i}(p.a);Object(o.a)([Object(h.b)()],Ct.prototype,"view",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"messages",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"analysis",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"viewData",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"layerView",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],Ct.prototype,"areaLabel",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],Ct.prototype,"perimeterLengthLabel",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"mode",void 0),Object(o.a)([Object(h.b)()],Ct.prototype,"loadingMessages",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],Ct.prototype,"visible",null),Object(o.a)([Object(h.b)()],Ct.prototype,"geodesicMeasurementDistanceThreshold",void 0),Ct=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementView")],Ct);var Pt={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},St={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null,geodesicCursorSegmentLength:null,cursorSegmentLength:null},Et=new Vt.a(Object(k.e)(),Object(k.e)()),Dt=Object(V.e)(),Mt=i(630),Gt=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e)).type="area-measurement-3d",r.layerViewData=new De,r._userUnit=null,r}return Object(r.a)(i,[{key:"unit",get:function(){return Object(c.u)(this._userUnit,this._defaultUnit)},set:function(e){this._userUnit=e}},{key:"result",get:function(){if(Object(c.k)(this.layerViewData.measurementData)){var e=this.layerViewData.measurementData;return{area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength}}return{area:null,geodesicArea:null,pathLength:null,geodesicPathLength:null,perimeterLength:null}}},{key:"initialize",value:function(){this.layerViewData.path.view=this.view,this.layerViewData.path.areaMeasurement=this.layer,this.analysisView=new Ct({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new Z({view:this.view,analysis:this.layer,layerViewData:this.layerViewData})}},{key:"destroy",value:function(){this.analysisController=Object(c.e)(this.analysisController),this.analysisView=Object(c.e)(this.analysisView),this.layerViewData=Object(c.e)(this.layerViewData)}},{key:"isUpdating",value:function(){var e;return!(null==(e=this.analysisView)||!e.loadingMessages)}},{key:"testData",get:function(){return{view:this.analysisView,controller:this.analysisController}}}]),i}(Object(d.a)(Mt.a));Object(o.a)([Object(h.b)()],Gt.prototype,"type",void 0),Object(o.a)([Object(h.b)()],Gt.prototype,"analysisView",void 0),Object(o.a)([Object(h.b)()],Gt.prototype,"analysisController",void 0),Object(o.a)([Object(h.b)()],Gt.prototype,"unit",null),Object(o.a)([Object(h.b)()],Gt.prototype,"layer",void 0),Object(o.a)([Object(h.b)()],Gt.prototype,"result",null),Object(o.a)([Object(h.b)()],Gt.prototype,"layerViewData",void 0),Object(o.a)([Object(h.b)(u.a)],Gt.prototype,"_defaultUnit",void 0),Object(o.a)([Object(h.b)()],Gt.prototype,"_userUnit",void 0);var zt=Gt=Object(o.a)([Object(l.a)("esri.views.3d.layers.AreaMeasurementLayerView3D")],Gt)},973:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return u}));var n,r,s=i(13),a=i(126),o=i(124),c=i(183),h=i(9),l=i(84);function u(e){var t=new l.a;return t.extensions.add("GL_OES_standard_derivatives"),t.attributes.add("position","vec3"),t.attributes.add("uv0","vec2"),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.varyings.add("vUV","vec2"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),t.vertex.code.add(Object(h.a)(n||(n=Object(s.a)(["\n    void main(void) {\n      vUV = uv0;\n      ","\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(position, 1.0)).z;":"")),e.multipassTerrainEnabled&&(t.fragment.include(a.a),t.include(o.b,e)),t.fragment.uniforms.add("size","vec2").add("color1","vec4").add("color2","vec4"),t.fragment.include(c.a),t.fragment.code.add(Object(h.a)(r||(r=Object(s.a)(["\n    void main() {\n      ","\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ","\n    }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"")),t}var d=Object.freeze({__proto__:null,build:u})}}]);
//# sourceMappingURL=91.e3995a27.chunk.js.map