{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","../node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView.js","../node_modules/@arcgis/core/layers/graphics/centroid.js","../node_modules/@arcgis/core/chunks/quickselect.js"],"names":["e","this","items","t","push","type","objectStateId","object","s","renderGeometry","owner","remove","length","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","i","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","a","h","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","c","_extents","allocator","_tmpExtent","_dirty","clear","contains","removeContained","r","pushNew","mergeTight","pop","hasProgressed","o","sort","done","getItemAt","delete","g","m","n","d","madeProgress","some","filterInPlace","containsPoint","p","arguments","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","handles","updateElevation","layerView","graphicsCore","events","queryGraphicUIDsInExtent","elevationProvider","view","resourceController","scheduler","on","_elevationChanged","watch","suspendedChange","registerTask","ELEVATION_ALIGNMENT","destroy","notifyChange","suspended","running","size","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","renderCoordsHelper","effectiveUpdatePolicy","keys","getGraphics3DGraphicById","alignWithElevation","spatialReference","emit","extent","needsElevationUpdates","context","layer","elevationInfo","mode","computedExtent","xmin","xmax","ymin","ymax","readOnly","prototype","v","elevationAlignment","b","watchUpdatingTracking","S","suspendResumeExtent","scaleVisibilityEnabled","w","f","preferredUpdatePolicy","graphicSymbolSupported","scaleVisibility","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","spatialIndex","setup","basemapTerrain","_set","j","objectStates","destroyed","updateClippingExtent","setupSuspendResumeExtent","startCreateGraphics","updating","loadedGraphics","find","u","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","acquireSet","x","highlight","toArray","isArray","map","setUids","setObjectIds","clippingArea","setClippingExtent","recreateAllGraphics","C","y","extentPadding","setExtent","updateSuspendResumeExtent","constructOnly","aliasOf","l","pause","resume","E","N","lengths","originPosition","coords","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","I","Math","sqrt","exports","log","M","exp","max","floor","min"],"mappings":"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","file":"static/js/27.e52678f6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,copy as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends t{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(e,t,i,s){this.layerView=e,this.queryGraphicUIDsInExtent=t,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(e=>this._elevationChanged(e))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(e){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,e.madeProgress()),e.run((()=>this.dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(e){const t=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,t,i),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this.dirtyExtents.empty&&!e.done;){const t=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);r(t)&&t.needsElevationUpdates()&&this.dirtyGraphicsSet.add(e)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,e.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this.dirtyGraphicsSet.add(t)))}_elevationChanged(e){if(\"scene\"===e.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.layerView.suspended){if(!this.updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i})}else t[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(t),this.notifyChange(\"updating\")}};e([a({readOnly:!0})],p.prototype,\"updating\",null),e([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=e([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);var d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Collection.js\";import r from\"../../../../core/Handles.js\";import{isSome as a,destroyMaybe as o,isNone as n}from\"../../../../core/maybe.js\";import{isAbortError as c}from\"../../../../core/promiseUtils.js\";import{init as h}from\"../../../../core/watchUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as d}from\"../../../../core/accessorSupport/diffUtils.js\";import u from\"../../../../layers/Layer.js\";import{hydrateGraphic as g}from\"../../../../layers/graphics/hydratedFeatures.js\";import m from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as y}from\"./constants.js\";import{Graphics3DCore as f}from\"./Graphics3DCore.js\";import b from\"./Graphics3DElevationAlignment.js\";import{Graphics3DObjectStates as j}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as C}from\"./graphicUtils.js\";import{WatchUpdatingTracking as S}from\"../../../support/WatchUpdatingTracking.js\";let v=class extends i{constructor(t){super(t),this.graphicsCore=null,this.elevationAlignment=new b,this.watchUpdatingTracking=new S,this.handles=new r,this.suspendResumeExtent=null}normalizeCtorArgs(t){let e=null;t.scaleVisibilityEnabled&&(delete(t={...t}).scaleVisibilityEnabled,e=new w);const i=new f({owner:t.owner,layer:t.layer,preferredUpdatePolicy:1,graphicSymbolSupported:!0});return{...t,graphicsCore:i,scaleVisibility:e}}initialize(){const t=this.scaleVisibility;a(t)&&\"minScale\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>t.layerMinMaxScaleChangeHandler())),\"elevationInfo\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{d(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())}))}async setup(){const t=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),a(this.scaleVisibility)&&\"minScale\"in this.layer){const e=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,e)}this._set(\"objectStates\",new j(this.graphicsCore));try{await this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,objectStates:this.objectStates})}catch(e){if(c(e))return;throw e}this.destroyed||(this.handles.add(this.view.watch(\"clippingArea\",(()=>this.updateClippingExtent()),!0)),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles=o(this.handles),this.watchUpdatingTracking.destroy(),this._set(\"elevationAlignment\",o(this.elevationAlignment)),this._set(\"scaleVisibility\",o(this.scaleVisibility)),this._set(\"objectStates\",o(this.objectStates)),this._set(\"graphicsCore\",o(this.graphicsCore))}get suspended(){return!(!a(this.scaleVisibility)||!this.scaleVisibility.suspended)}get updating(){var t,e;return!!(null!=(t=this.graphicsCore)&&t.updating||a(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(e=this.watchUpdatingTracking)&&e.updating)}getGraphicFromGraphicUid(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof u?this.layer:null;return g(e,t)}}}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof m)return x;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof e)return this.highlight([t]);if(t instanceof s&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setObjectIds(i,e),s}}return x}updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}updateSuspendResumeExtent(){n(this.scaleVisibility)||(this.suspendResumeExtent=C(this.graphicsCore.computedExtent,this.suspendResumeExtent,y,this.graphicsCore.extentPadding),this.scaleVisibility.setExtent(this.suspendResumeExtent))}setupSuspendResumeExtent(){n(this.scaleVisibility)||(h(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent()),!0),this.graphicsCore.watch(\"extentPadding\",(t=>this.updateSuspendResumeExtent())))}};t([p({constructOnly:!0})],v.prototype,\"owner\",void 0),t([p({constructOnly:!0})],v.prototype,\"layer\",void 0),t([p({readOnly:!0,aliasOf:\"owner.view\"})],v.prototype,\"view\",void 0),t([p({constructOnly:!0})],v.prototype,\"graphicsCore\",void 0),t([p({constructOnly:!0})],v.prototype,\"scaleVisibility\",void 0),t([p({readOnly:!0})],v.prototype,\"elevationAlignment\",void 0),t([p({readOnly:!0})],v.prototype,\"objectStates\",void 0),t([p({readOnly:!0})],v.prototype,\"watchUpdatingTracking\",void 0),t([p({readOnly:!0})],v.prototype,\"suspended\",null),t([p({readOnly:!0})],v.prototype,\"updating\",null),v=t([l(\"esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView\")],v);const x={remove(){},pause(){},resume(){}};var E=v;export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function n(t,n){return t?n?4:3:n?3:2}function e(e,o,u,l,N){if(t(o)||!o.lengths.length)return null;const s=\"upperLeft\"===(null==N?void 0:N.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const c=e.coords,f=[],i=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:h}=o,g=n(u,l);let E=0;for(const t of T){const n=r(i,h,E,t,u,l,s);n&&f.push(n),E+=t*g}if(f.sort(((t,n)=>{let e=s*t[2]-s*n[2];return 0===e&&u&&(e=t[4]-n[4]),e})),f.length){let t=6*f[0][2];c[0]=f[0][0]/t,c[1]=f[0][1]/t,u&&(t=6*f[0][4],c[2]=0!==t?f[0][3]/t:0),(c[0]<i[0]||c[0]>i[1]||c[1]<i[2]||c[1]>i[3]||u&&(c[2]<i[4]||c[2]>i[5]))&&(c.length=0)}if(!c.length){const t=o.lengths[0]?I(h,0,T[0],u,l):null;if(!t)return null;c[0]=t[0],c[1]=t[1],u&&t.length>2&&(c[2]=t[2])}return e}function r(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,m=I-1;n<m;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function I(t,e,r,I,s){const c=n(I,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,m=r-1;n<m;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],m=t[i+2],b=I?u(n,e,r,s,c,m):o(n,e,s,c);if(b)if(T+=b,I){const t=N(n,e,r,s,c,m);h+=b*t[0],g+=b*t[1],E+=b*t[2]}else{const t=l(n,e,s,c);h+=b*t[0],g+=b*t[1]}}return T>0?I?[h/T,g/T,E/T]:[h/T,g/T]:r>0?I?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function u(t,n,e,r,I,o){const u=r-t,l=I-n,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function l(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}export{e as getCentroidOptimizedGeometry,I as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nvar r,t,o,a={exports:{}};r=a,t=function(){function r(r,o,n,f,e){t(r,o,n||0,f||r.length-1,e||a)}function t(r,a,n,f,e){for(;f>n;){if(f-n>600){var h=f-n+1,i=a-n+1,u=Math.log(h),M=.5*Math.exp(2*u/3),v=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);t(r,a,Math.max(n,Math.floor(a-i*M/h+v)),Math.min(f,Math.floor(a+(h-i)*M/h+v)),e)}var x=r[a],c=n,p=f;for(o(r,n,a),e(r[f],x)>0&&o(r,n,f);c<p;){for(o(r,c,p),c++,p--;e(r[c],x)<0;)c++;for(;e(r[p],x)>0;)p--}0===e(r[n],x)?o(r,n,p):o(r,++p,f),p<=a&&(n=p+1),a<=p&&(f=p-1)}}function o(r,t,o){var a=r[t];r[t]=r[o],r[o]=a}function a(r,t){return r<t?-1:r>t?1:0}return r},void 0!==(o=t())&&(r.exports=o);var n=a.exports;export{n as q};\n"],"sourceRoot":""}