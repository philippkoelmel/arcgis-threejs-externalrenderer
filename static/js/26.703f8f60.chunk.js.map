{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/layers/ImageryTileLayerView3D.js","../node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js"],"names":["c","arguments","type","isAlignedMapTile","this","layer","increaseRasterJobHandlerUsage","e","updateFullExtent","addResolvingPromise","r","i","view","then","basemapTerrain","tilingScheme","tileInfo","t","indexOf","format","compatibleWith","toTileInfo","_set","updatingHandles","add","refresh","decreaseRasterJobHandlerUsage","document","createElement","getContext","size","width","height","clearRect","getImageData","lods","scale","length","levelRangeFromScaleRange","s","a","o","l","_canSymbolizeInWebGL","m","requestRawData","signal","requestAsImageElement","fetchTile","d","HTMLImageElement","h","pixelBlock","_blankTile","applyRenderer","p","n","symbolizerRenderer","symbolizer","rendererJSON","symbolizerParameters","generateWebGLParameters","_getSymbolizerOptions","transformGrid","isRendereredSource","interpolation","bandIds","lodAt","resolution","isGCS","spatialReference","isGeographic","x","y","JSON","stringify","lij","emit","suspended","supportsTextureFloat","canRenderInWebGL","u","_rasterFieldPrefix","fullExtent","datumTransformation","renderer","dynamicRangeAdjustment","Promise","reject","popupEnabled","popupTemplate","identify","value","magdirValue","f","hasStandardTime","map","getStandardTimeValue","join","ObjectId","_formatAttributeValue","rasterInfo","attributeTable","features","filter","attributes","Value","VALUE","String","hasOwnProperty","dataType","clone","sourceLayer","push","resolve","fieldInfos","_getFieldInfo","trim","_formatDelimitedString","_formatNumberFromString","toLowerCase","some","fieldName","replace","split","Number","isNaN","prototype","readOnly","g","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","handles","doRefresh","catch","getLogger","declaredClass","error","xoffset","Math","max","abs","yoffset","stops","maxSize","minSize","floor","event","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","isWGS84","isWebMercator","cols","rows","M","center","w","R","N","j","S","b","z","normalize","v","apply","wkid","W","G","storageInfo","origin","originX","halfWorldWidth","pyramidsInfo","nativePixelSize","extent","maximumPyramidLevel","blockWidth","pyramidScalingFactor","transform","ceil","round","resolutionX","datsetColumnCount","worldColumnCountFromOrigin","leftMargin","rightPadding","originColumnOffset","hasGCSSShiftTransform","P","inverseTransform","NaN","C","Float32Array","L","k","offsets","coefficients","spacing","pixelSize","pyramidResolutions","pyramidLevel","pyramidResolution","excessiveReading","log","LN2"],"mappings":"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","file":"static/js/26.703f8f60.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrap as r,isNone as t}from\"../../../core/maybe.js\";import{whenTrueOnce as i}from\"../../../core/watchUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as o}from\"./LayerView3D.js\";import{TiledLayerView3D as l}from\"./TiledLayerView3D.js\";import n from\"../terrain/RasterTile.js\";import{ImageryTileLayerView as m}from\"../../layers/ImageryTileLayerView.js\";import d from\"../../layers/LayerView.js\";import{RefreshableLayerView as h}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as p}from\"../../support/drapedUtils.js\";import y from\"../../webgl/capabilities.js\";let c=class extends(m(h(l(o(d))))){constructor(){super(...arguments),this.type=\"imagery-tile-3d\",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage();const e=this.updateFullExtent();this.addResolvingPromise(e);const r=i(this.view,\"basemapTerrain.tilingSchemeLocked\").then((()=>{const e=this.view.basemapTerrain.tilingScheme,{tileInfo:r}=this.layer,t=[\"png\",\"png24\",\"png32\",\"jpg\",\"mixed\"].indexOf(r.format)>-1&&e.compatibleWith(r);this.isAlignedMapTile=t;const i=t?r:e.toTileInfo();this._set(\"tileInfo\",i),this.updatingHandles.add(this,\"layer.renderer\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.interpolation\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.bandIds\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.multidimensionalDefinition\",(()=>this.refresh()))}));this.addResolvingPromise(r)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const e=document.createElement(\"canvas\"),r=e.getContext(\"2d\"),[t,i]=this.tileInfo.size;return e.width=t,e.height=i,r.clearRect(0,0,t,i),r.getImageData(0,0,t,i)}get imageFormatIsOpaque(){return\"jpg\"===this.layer.tileInfo.format}get hasMixedImageFormats(){return\"mixed\"===this.layer.tileInfo.format}get dataLevelRange(){const e=this.tileInfo.lods,r=this.layer.tileInfo.lods,t=e[0].scale,i=r[r.length-1].scale;return this.levelRangeFromScaleRange(t,i)}async fetchTile(e,i,s,a){const o=this.tileInfo,l=this._canSymbolizeInWebGL(),m={tileInfo:o,requestRawData:l,signal:r(a.signal),requestAsImageElement:this.isAlignedMapTile},d=await this.layer.fetchTile(e,i,s,m);if(d instanceof HTMLImageElement)return d;let h=d&&d.pixelBlock;if(t(h))return this._blankTile;if(!l&&(h=await this.layer.applyRenderer(d),t(h)))return this._blankTile;const p=new n([e,i,s],h,o.size[0],o.size[1]);return l?(p.symbolizerRenderer=this.layer.symbolizer.rendererJSON,p.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e)),p.transformGrid=d.transformGrid):p.isRendereredSource=!0,p.interpolation=this.layer.interpolation,p.bandIds=this.layer.bandIds,p}_getSymbolizerOptions(e){const r=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:r,y:r},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}createFetchPopupFeaturesQueryGeometry(e,r){return p(e,r,this.view)}refresh(){this.emit(\"data-changed\")}async doRefresh(e){this.suspended||this.emit(\"data-changed\")}_canSymbolizeInWebGL(){return y().supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};e([s({readOnly:!0})],c.prototype,\"_blankTile\",null),e([s({readOnly:!0})],c.prototype,\"imageFormatIsOpaque\",null),e([s({readOnly:!0})],c.prototype,\"hasMixedImageFormats\",null),e([s({readOnly:!0})],c.prototype,\"dataLevelRange\",null),c=e([a(\"esri.views.3d.layers.ImageryTileLayerView3D\")],c);var g=c;export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{isSome as i}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{getDefaultDatumTransformationForDataset as s,projectExtent as n}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as l}from\"./support/popupUtils.js\";const u=u=>{let p=class extends u{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,o){const{layer:a}=this;if(!e)return Promise.reject(new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));const{popupEnabled:s}=a,n=l(a,o);if(!s||!i(n))throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:s,popupTemplate:n});const u=[],{value:p,magdirValue:m}=await a.identify(e);let f=\"\";if(p&&p.length){var c,h;f=\"imagery-tile\"===a.type&&a.hasStandardTime()&&null!=p[0]?p.map((e=>a.getStandardTimeValue(e))).join(\", \"):p.join(\", \");const e={ObjectId:0},r=\"Raster.ServicePixelValue\";e[r]=this._formatAttributeValue(f,r);const i=null==(c=a.rasterInfo)||null==(h=c.attributeTable)?void 0:h.features;if(i&&i.length>0){const t=i.filter((e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===f}));if(t.length>0){const r=t[0];if(r)for(const t in r.attributes)if(r.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(r.attributes[t],i)}}}const o=a.rasterInfo.dataType;\"vector-magdir\"!==o&&\"vector-uv\"!==o||(e[\"Raster.Magnitude\"]=null==m?void 0:m[0],e[\"Raster.Direction\"]=null==m?void 0:m[1]);const s=new t(this.fullExtent.clone(),null,e);s.layer=a,s.sourceLayer=s.layer,u.push(s)}return u}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new r(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const i=s(this.layer.fullExtent,this.view.spatialReference,!1),o=n(this.layer.fullExtent,this.view.spatialReference,i);return null==o&&(t=new r(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",o),this.datumTransformation||(this.datumTransformation=s(this.layer.fullExtent,this.view.spatialReference,!0)),t?Promise.reject(t):Promise.resolve()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([o()],p.prototype,\"layer\",void 0),e([o()],p.prototype,\"view\",void 0),e([o()],p.prototype,\"fullExtent\",void 0),e([o()],p.prototype,\"tileInfo\",void 0),e([o({readOnly:!0})],p.prototype,\"hasTilingEffects\",null),p=e([a(\"esri.views.layers.ImageryTileLayerView\")],p),p};export{u as ImageryTileLayerView,u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(()=>{this.doRefresh().catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as RefreshableLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isNone as t,isSome as n}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as o}from\"../../../core/unitUtils.js\";import{isLoaded as r,isSupported as i,load as a,getTransformation as s,project as l}from\"../../../geometry/projection.js\";import{project as c}from\"../../../geometry/support/webMercatorUtils.js\";import x from\"../../../geometry/Extent.js\";import m from\"../../../geometry/Point.js\";const f=5e-4,u=function(e,t){const n=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||n)},p=function(e,t){const n=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,o=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(n-e[2*t.rows+2]),Math.abs(o-e[2*t.rows+3])]},h={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125},y=32;async function M(){if(r()||!i())return null;await a()}function d(t,n,o){if(!u(t.spatialReference,n))return null;if(!r())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");return o?s(n,t.spatialReference,t):s(t.spatialReference,n,t)}function g(n,o,i,a=null){if(n.spatialReference.equals(o))return n;const s=u(n.spatialReference,o);if(s&&!r())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");const m=i.center,f=new x({xmin:m.x-n.x/2,xmax:m.x+n.x/2,ymin:m.y-n.y/2,ymax:m.y+n.y/2,spatialReference:n.spatialReference}),p=s?l(f,o,a):c(f,o);if(t(p))return null;return{x:p.xmax-p.xmin,y:p.ymax-p.ymin}}function w(e,t=.01){return o(e)?t/o(e):0}function R(n,o,i=null,a=!0){const s=n.spatialReference;if(s.equals(o))return n;let x=c(n,o);if(t(x)){if(!r())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");x=l(n,o,i)}if(a&&o.isGeographic){const[e,t]=N(s,!0),o=w(s);o&&null!=e&&null!=t&&(Math.abs(n.x-e)<o&&Math.abs(180-x.x)<f?x.x-=360:Math.abs(n.x-t)<o&&Math.abs(180+x.x)<f&&(x.x+=360))}return x}function j(e){const t=S(e[0].spatialReference);if(e.length<2||!n(t))return e[0];let{xmin:o,xmax:r,ymin:i,ymax:a}=e[0];for(let n=1;n<e.length;n++){const o=e[n];r=o.xmax+t*n,i=Math.min(i,o.ymin),a=Math.max(a,o.ymax)}return new x({xmin:o,xmax:r,ymin:i,ymax:a,spatialReference:e[0].spatialReference})}function b(e,t,o=null,r=!0){if(e.spatialReference.equals(t))return e;const i=z(e),a=S(e.spatialReference,!0);if(!n(a)||0===i)return v(e,t,o,r);return j(e.clone().normalize().map((e=>v(e,t,o,r))))}function v(n,o,i=null,a=!0){const s=n.spatialReference;if(s.equals(o))return n;if(u(s,o)&&!r())throw new e(\"rasterprojectionhelper-projectExtent\",\"projection engine is not loaded\");let x=c(n,o);t(x)&&(x=l(n,o,i));let[p,h]=N(s,!0);if(x&&a&&s.isWebMercator&&o.isGeographic&&null!=p&&null!=h){const e=.001,t=1e3;if(Math.abs(n.xmin-p)<e&&Math.abs(h-n.xmax)>t&&Math.abs(180-x.xmax)<f){x.xmin=-180;const e=[];e.push(new m(n.xmax,n.ymin,s)),e.push(new m(n.xmax,(n.ymin+n.ymax)/2,s)),e.push(new m(n.xmax,n.ymax,s));const t=e.map((e=>R(e,o,i))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));x.xmax=Math.max.apply(null,t)}if(Math.abs(n.xmax-h)<e&&Math.abs(p-n.xmin)>t&&Math.abs(180+x.xmin)<f){x.xmax=180;const e=[];e.push(new m(n.xmin,n.ymin,s)),e.push(new m(n.xmin,(n.ymin+n.ymax)/2,s)),e.push(new m(n.xmin,n.ymax,s));const t=e.map((e=>R(e,o,i))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));x.xmin=Math.min.apply(null,t)}}[p,h]=N(o,!0);const y=w(o);return y&&null!=p&&null!=h&&(Math.abs(x.xmin-p)<y&&(x.xmin=p),Math.abs(x.xmax-h)<y&&(x.xmax=h)),x}function S(e,t=!1){const n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*h[e.wkid]||null}function N(e,t=!1){const o=[],r=S(e,t);return n(r)&&(o.push(-r/2),o.push(r/2)),o}function W(e,t,n,o){let r=(e-t)/n;return r-Math.floor(r)!=0?r=Math.floor(r):o&&(r-=1),r}function z(e,t=!1){const o=S(e.spatialReference);if(!n(o))return 0;const r=t?0:-(o/2);return W(e.xmax,r,o,!0)-W(e.xmin,r,o,!1)}function G(e){const t=e.storageInfo.origin.x,o=S(e.spatialReference,!0);if(!n(o))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const r=o/2,{nativePixelSize:i,storageInfo:a,extent:s}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:x}=a;let m=i.x;const f=[],u=n(e.transform)&&\"gcs-shift\"===e.transform.type,p=t+r,h=u?o-t:r-t;for(let n=0;n<=l;n++){const e=(s.xmax-t)/m/c,n=e-Math.floor(e)==0?e:Math.ceil(e),r=(o/2-t)/m/c,i=r-Math.floor(r)==0?r:Math.ceil(r),a=Math.floor(p/m/c),l=Math.round(p/m)%c,u=(c-Math.round(h/m)%c)%c;f.push({resolutionX:m,blockWidth:c,datsetColumnCount:n,worldColumnCountFromOrigin:i,leftMargin:l,rightPadding:u,originColumnOffset:a}),m*=x}return{originX:t,halfWorldWidth:r,pyramidsInfo:f,hasGCSSShiftTransform:u}}function P(t,o,i,a=null,s=null,l=!1,c=[y,y]){if(u(t.spatialReference,o.spatialReference)&&!r())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");if(!(t&&o&&i))return null;const{xmin:x,ymin:f,xmax:h,ymax:M}=t,d=t.spatialReference,g=o.spatialReference,w=S(g);l=l||\"gcs-shift\"===(null==s?void 0:s.type);const j={x:c[0]*i.x,y:c[1]*i.y},b={cols:Math.ceil((h-x)/j.x-.1/c[0])+1,rows:Math.ceil((M-f)/j.y-.1/c[1])+1},v=j.x,N=j.y,W=[];let z,G=!1;for(let e=0;e<b.cols;e++){const t=[];for(let r=0;r<b.rows;r++){let i=R(new m({x:x+v*e,y:M-N*r,spatialReference:d}),g,a);s&&(i=s.inverseTransform(i)),t.push(i),e>0&&l&&i&&z[r]&&n(w)&&i.x<z[r].x&&(i.x+=w),i?(W.push((i.x-o.xmin)/(o.xmax-o.xmin)),W.push((o.ymax-i.y)/(o.ymax-o.ymin))):(W.push(NaN),W.push(NaN),G=!0)}z=t}const P=p(W,b),C=new Float32Array((b.cols-1)*(b.rows-1)*2*6),L=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),k=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let e=0;e<b.cols-1;e++){for(let t=0;t<b.rows-1;t++){let n=e*b.rows*2+2*t;const o=W[n],r=W[n+1],i=W[n+2],a=W[n+3];n+=2*b.rows;const s=W[n],l=W[n+1],c=W[n+2],x=W[n+3];let m=0,f=12*(t*(b.cols-1)+e);for(let e=0;e<3;e++)C[f++]=L[m++]*o+L[m++]*i+L[m++]*c;m=0;for(let e=0;e<3;e++)C[f++]=L[m++]*r+L[m++]*a+L[m++]*x;m=0;for(let e=0;e<3;e++)C[f++]=k[m++]*o+k[m++]*s+k[m++]*c;m=0;for(let e=0;e<3;e++)C[f++]=k[m++]*r+k[m++]*l+k[m++]*x}if(G)for(let e=0;e<C.length;e++)isNaN(C[e])&&(C[e]=-1)}return{offsets:W,error:P,coefficients:C,spacing:c,size:[b.cols-1,b.rows-1]}}function C(e){const t=e.clone().normalize();return 1===t.length?t[0]:j(t)}function L(e,t,o){const{storageInfo:r,pixelSize:i}=t;let a,s=!1;const{pyramidResolutions:l}=r;if(n(l)&&l.length){const n=(e.x+e.y)/2,r=l[l.length-1],c=(r.x+r.y)/2,x=(i.x+i.y)/2;if(n<=x)a=0;else if(n>=c)a=l.length,s=n/c>8;else{let e,t=x;for(let r=1;r<=l.length;r++){if(e=(l[r-1].x+l[r-1].y)/2,n<=e){n===e?a=r:\"down\"===o?(a=r-1,s=n/t>8):a=\"up\"===o||n-t>e-n||n/t>2?r:r-1;break}t=e}}const f=0===a?i:l[a-1];return{pyramidLevel:a,pyramidResolution:new m({x:f.x,y:f.y,spatialReference:t.spatialReference}),excessiveReading:s}}const c=Math.log(e.x/i.x)/Math.LN2,x=Math.log(e.y/i.y)/Math.LN2,f=t.storageInfo.maximumPyramidLevel||0;a=\"down\"===o?Math.floor(Math.min(c,x)):\"up\"===o?Math.ceil(Math.max(c,x)):Math.round((c+x)/2),a<0?a=0:a>f&&(s=a>f+3,a=f);const u=2**a;return{pyramidLevel:a,pyramidResolution:new m({x:u*t.nativePixelSize.x,y:u*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function k(e,t,n=512,r=!0){const{extent:i,spatialReference:a,pixelSize:s}=e,l=g(new m({x:s.x,y:s.y,spatialReference:a}),t,i);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(l.x+l.y)/2,x=o(t),f=c*x*96*39.37,u=t.isGeographic?256/n*295828763.7958547:256/n*591657527.591555;let p=\"vector-magdir\"===e.dataType||\"vector-uv\"===e.dataType;const h=b(i,t);p||r&&(t.isGeographic||t.isWebMercator)&&(p=h.xmin*h.xmax<0);let y,M=f;const d=1.001;if(p){M=u;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,n=e*(96*x*39.37),o=t.isGeographic?4326:3857;y=g(new m({x:e,y:e,spatialReference:{wkid:o}}),a,h),y.x*=M/n,y.y*=M/n}else{y={x:s.x,y:s.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let n=0;for(;M<u*(d/2)&&n<t;)n++,M*=2,y.x*=2,y.y*=2;Math.max(M,u)/Math.min(M,u)<=d&&(M=u)}const w=[M],R=[{x:y.x,y:y.y}],j=70.5310735,v=Math.min(j,f)/d;for(;M>=v;)M/=2,y.x/=2,y.y/=2,w.push(M),R.push({x:y.x,y:y.y});return{projectedPixelSize:l,scales:w,srcResolutions:R,isCustomTilingScheme:!p}}export{k as computeProjectedScales,y as defaultGridSpacing,d as getDefaultDatumTransformationForDataset,P as getProjectionOffsetGrid,G as getRasterDatasetAlignmentInfo,z as getWorldWrapCount,M as load,b as projectExtent,R as projectPoint,g as projectResolution,C as snapExtent,L as snapPyramid};\n"],"sourceRoot":""}