{"version":3,"sources":["../node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js","../node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js","../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfo.js","../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoType.js","../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoBlock.js","../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoCheckbox.js","../node_modules/@arcgis/core/layers/support/BuildingFilterMode.js","../node_modules/@arcgis/core/layers/support/BuildingFilterModeSolid.js","../node_modules/@arcgis/core/layers/support/BuildingFilterModeWireFrame.js","../node_modules/@arcgis/core/layers/support/BuildingFilterModeXRay.js","../node_modules/@arcgis/core/layers/support/BuildingFilterBlock.js","../node_modules/@arcgis/core/layers/support/BuildingFilter.js","../node_modules/@arcgis/core/layers/support/BuildingSummaryStatistics.js","../node_modules/@arcgis/core/layers/BuildingSceneLayer.js"],"names":["a","p","type","e","readOnly","json","origins","service","read","source","reader","l","r","o","t","Array","isArray","map","layerType","c","u","y","messages","push","s","definition","context","listMode","sublayers","this","forEachSublayer","n","write","prototype","i","sublayersProperty","readSublayers","forEach","d","parsedUrl","portalItem","apiKey","signal","rootDocument","path","match","urlParts","root","layerId","parseInt","portalItemFromServiceItemId","loadFromUrl","findAndLoadRelatedPortalItem","loadFeatureLayerFromPortalItem","query","f","token","responseType","data","findServerInfo","owningSystemUrl","replace","fetchRelatedItems","relationshipType","direction","find","load","findMatchingAssociatedSublayerUrl","url","authMode","fetchRootDocument","Promise","all","layers","h","Error","Math","min","length","id","serviceItemId","fetchServiceOwningPortalUrl","portal","arguments","String","filterType","filterValues","ofType","m","filterTypes","filterBlocks","edges","wireFrame","nonNullable","types","key","base","typeMap","solid","fromJSON","enabled","isRequired","filterExpression","filterMode","title","description","name","filterAuthoringInfo","checkbox","constructOnly","getLogger","fieldName","modelName","label","max","mostFrequentValues","subLayerIds","Number","every","slice","loaded","loadStatus","_get","error","addResolvingPromise","_fetchService","resolve","origin","LoadableMixin","A","E","I","_","b","overridePolicy","P","operationalLayerType","allSublayers","getCollections","getChildrenFunction","sublayerOverrides","filters","activeFilterId","summaryStatistics","outFields","destroy","layer","applySublayerOverrides","overrides","get","Map","set","value","Object","keys","writeSublayerOverrides","writeUnappliedOverrides","readSublayerOverrides","statisticsHRef","L","_set","_validateElevationInfo","loadFromPortal","supportedTypes","catch","then","_fetchAssociatedFeatureService","_debouncedSaveOperations","getTypeKeywords","_getTypeKeywords","portalItemLayerType","elevationInfo","mode","warn","featureExpressionInfo","expression","B","fetchPortalItem","associatedFeatureServiceItem","O","S","g","j","w","v","x","T","F","K"],"mappings":"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","file":"static/js/81.abd9905f.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{loadAllChildren as o}from\"../../core/loadAll.js\";import s from\"../../core/Warning.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import u from\"./BuildingComponentSublayer.js\";import n from\"./BuildingSublayer.js\";var a;const p={type:e,readOnly:!0,json:{origins:{service:{read:{source:\"sublayers\",reader:l}}},read:!1}};function l(r,o,t){if(r&&Array.isArray(r))return new e(r.map((r=>{const e=y(r);if(e){const o=new e;return o.read(r,t),o}t&&t.messages&&r&&t.messages.push(new s(\"building-scene-layer:unsupported-sublayer-type\",\"Building scene sublayer of type '\"+(r.type||\"unknown\")+\"' are not supported\",{definition:r,context:t}))})))}let c=a=class extends n{constructor(r){super(r),this.type=\"building-group\",this.listMode=\"show\",this.sublayers=null}loadAll(){return o(this,(r=>a.forEachSublayer(this.sublayers,(e=>{\"building-group\"!==e.type&&r(e)}))))}};function y(r){return\"group\"===r.layerType?c:u}r([t({type:[\"hide\",\"show\",\"hide-children\"],json:{write:!0}})],c.prototype,\"listMode\",void 0),r([t(p)],c.prototype,\"sublayers\",void 0),c=a=r([i(\"esri.layers.buildingSublayers.BuildingGroupSublayer\")],c),function(r){function e(r,o){r.forEach((r=>{o(r),\"building-group\"===r.type&&e(r.sublayers,o)}))}r.sublayersProperty=p,r.readSublayers=l,r.forEachSublayer=e}(c||(c={}));var d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{id as t}from\"../../kernel.js\";import r from\"../../request.js\";import{isNone as e,isSome as a}from\"../../core/maybe.js\";import{throwIfAbortError as i}from\"../../core/promiseUtils.js\";import s from\"../FeatureLayer.js\";import n from\"../../portal/Portal.js\";import o from\"../../portal/PortalItem.js\";class l{constructor(t,r,e,a){this.parsedUrl=t,this.portalItem=r,this.apiKey=e,this.signal=a,this.rootDocument=null;const i=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);i&&(this.urlParts={root:i[1],layerId:parseInt(i[2],10)})}async fetch(){var t;if(!this.urlParts)return null;const r=null!=(t=this.portalItem)?t:await this.portalItemFromServiceItemId();if(e(r))return this.loadFromUrl();const a=await this.findAndLoadRelatedPortalItem(r);return e(a)?null:this.loadFeatureLayerFromPortalItem(a)}async fetchPortalItem(){var t;if(!this.urlParts)return null;const r=null!=(t=this.portalItem)?t:await this.portalItemFromServiceItemId();return e(r)?null:this.findAndLoadRelatedPortalItem(r)}async fetchRootDocument(){if(a(this.rootDocument))return this.rootDocument;if(e(this.urlParts))return this.rootDocument={},{};const t={query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:this.signal},i=`${this.urlParts.root}/SceneServer`;try{const e=await r(i,t);this.rootDocument=e.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const a=null==(e=t)?void 0:e.findServerInfo(this.parsedUrl.path);if(null!=a&&a.owningSystemUrl)return a.owningSystemUrl;const s=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await r(s,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(n){i(n)}return null}async findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(r){return i(r),null}}async loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this.findMatchingAssociatedSublayerUrl(t.url);return new s({url:r,portalItem:t}).load({signal:this.signal})}async loadFromUrl(){const t=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new s({url:t}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),a={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},i=this.urlParts.layerId,s=this.fetchRootDocument(),n=r(e,a),[o,l]=await Promise.all([n,s]),c=l&&l.layers,h=o.data&&o.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(c))for(let r=0;r<Math.min(c.length,h.length);r++){if(c[r].id===i)return`${e}/${h[r].id}`}else if(i<h.length)return`${e}/${h[i].id}`;throw new Error(\"could not find matching associated sublayer\")}async portalItemFromServiceItemId(){const t=(await this.fetchRootDocument()).serviceItemId;if(!t)return null;const r=new o({id:t,apiKey:this.apiKey}),e=await this.fetchServiceOwningPortalUrl();a(e)&&(r.portal=new n({url:e}));try{return r.load({signal:this.signal})}catch(s){return i(s),null}}}export{l as FetchAssociatedFeatureLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";let t=class extends o{constructor(){super(...arguments),this.type=null}};r([s({type:String,readOnly:!0,json:{write:!0}})],t.prototype,\"type\",void 0),t=r([e(\"esri.layers.support.BuildingFilterAuthoringInfo\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{clone as o}from\"../../core/lang.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var p;let i=p=class extends e{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new p({filterType:this.filterType,filterValues:o(this.filterValues)})}};r([t({type:String,json:{write:!0}})],i.prototype,\"filterType\",void 0),r([t({type:[String],json:{write:!0}})],i.prototype,\"filterValues\",void 0),i=p=r([s(\"esri.layers.support.BuildingFilterAuthoringInfoType\")],i);var l=i;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import o from\"../../core/Collection.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{clone as s}from\"../../core/lang.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"./BuildingFilterAuthoringInfoType.js\";var c;const l=o.ofType(i);let m=c=class extends e{clone(){return new c({filterTypes:s(this.filterTypes)})}};r([t({type:l,json:{write:!0}})],m.prototype,\"filterTypes\",void 0),m=c=r([p(\"esri.layers.support.BuildingFilterAuthoringInfoBlock\")],m);var n=m;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{clone as e}from\"../../core/lang.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"./BuildingFilterAuthoringInfo.js\";import c from\"./BuildingFilterAuthoringInfoBlock.js\";var p;const l=r.ofType(c);let n=p=class extends i{constructor(){super(...arguments),this.type=\"checkbox\"}clone(){return new p({filterBlocks:e(this.filterBlocks)})}};o([t({type:[\"checkbox\"]})],n.prototype,\"type\",void 0),o([t({type:l,json:{write:!0}})],n.prototype,\"filterBlocks\",void 0),n=p=o([s(\"esri.layers.support.BuildingFilterAuthoringInfoCheckbox\")],n);var m=n;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends o{};r([s({readOnly:!0,json:{read:!1}})],p.prototype,\"type\",void 0),p=r([e(\"esri.layers.support.BuildingFilterMode\")],p);var t=p;export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"./BuildingFilterMode.js\";var t;let p=t=class extends s{constructor(){super(...arguments),this.type=\"solid\"}clone(){return new t}};r([o({type:[\"solid\"],readOnly:!0,json:{write:!0}})],p.prototype,\"type\",void 0),p=t=r([e(\"esri.layers.support.BuildingFilterModeSolid\")],p);var i=p;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{clone as e}from\"../../core/lang.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{enumeration as s}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"./BuildingFilterMode.js\";import{symbol3dEdgesProperty as i}from\"../../symbols/edges/utils.js\";var c;let m=c=class extends p{constructor(){super(...arguments),this.type=\"wire-frame\",this.edges=null}clone(){return new c({edges:e(this.edges)})}};r([s({wireFrame:\"wire-frame\"})],m.prototype,\"type\",void 0),r([o(i)],m.prototype,\"edges\",void 0),m=c=r([t(\"esri.layers.support.BuildingFilterModeWireFrame\")],m);var a=m;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"./BuildingFilterMode.js\";var t;let p=t=class extends s{constructor(){super(...arguments),this.type=\"x-ray\"}clone(){return new t}};r([o({type:[\"x-ray\"],readOnly:!0,json:{write:!0}})],p.prototype,\"type\",void 0),p=t=r([e(\"esri.layers.support.BuildingFilterModeXRay\")],p);var c=p;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{clone as o}from\"../../core/lang.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"./BuildingFilterMode.js\";import p from\"./BuildingFilterModeSolid.js\";import l from\"./BuildingFilterModeWireFrame.js\";import n from\"./BuildingFilterModeXRay.js\";var a;const d={nonNullable:!0,types:{key:\"type\",base:s,typeMap:{solid:p,\"wire-frame\":l,\"x-ray\":n}},json:{read:r=>{switch(r&&r.type){case\"solid\":return p.fromJSON(r);case\"wireFrame\":return l.fromJSON(r);case\"x-ray\":return n.fromJSON(r);default:return}},write:{enabled:!0,isRequired:!0}}};let c=a=class extends e{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new p,this.title=\"\"}clone(){return new a({filterExpression:this.filterExpression,filterMode:o(this.filterMode),title:this.title})}};r([t({type:String,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,\"filterExpression\",void 0),r([t(d)],c.prototype,\"filterMode\",void 0),r([t({type:String,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,\"title\",void 0),c=a=r([i(\"esri.layers.support.BuildingFilterBlock\")],c);var m=c;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{clone as t}from\"../../core/lang.js\";import{generateUUID as i}from\"../../core/uuid.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"./BuildingFilterAuthoringInfo.js\";import l from\"./BuildingFilterAuthoringInfoCheckbox.js\";import c from\"./BuildingFilterBlock.js\";var u;const d=r.ofType(c);let m=u=class extends e{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=i(),this.name=null}clone(){return new u({description:this.description,filterBlocks:t(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:t(this.filterAuthoringInfo)})}};o([s({type:String,json:{write:!0}})],m.prototype,\"description\",void 0),o([s({type:d,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,\"filterBlocks\",void 0),o([s({types:{key:\"type\",base:n,typeMap:{checkbox:l}},json:{read:o=>\"checkbox\"===(o&&o.type)?l.fromJSON(o):null,write:!0}})],m.prototype,\"filterAuthoringInfo\",void 0),o([s({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,\"id\",void 0),o([s({type:String,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,\"name\",void 0),m=u=o([p(\"esri.layers.support.BuildingFilter\")],m);var a=m;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import s from\"../../core/Loadable.js\";import o from\"../../core/Logger.js\";import{isSome as i}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";const u=o.getLogger(\"esri.layers.support.BuildingSummaryStatistics\");let n=class extends t{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};e([a({type:String})],n.prototype,\"fieldName\",void 0),e([a({type:String})],n.prototype,\"modelName\",void 0),e([a({type:String})],n.prototype,\"label\",void 0),e([a({type:Number})],n.prototype,\"min\",void 0),e([a({type:Number})],n.prototype,\"max\",void 0),e([a({json:{read:e=>Array.isArray(e)&&(e.every((e=>\"string\"==typeof e))||e.every((e=>\"number\"==typeof e)))?e.slice():null}})],n.prototype,\"mostFrequentValues\",void 0),e([a({type:[Number]})],n.prototype,\"subLayerIds\",void 0),n=e([p(\"esri.layers.support.BuildingFieldStatistics\")],n);let m=class extends(s.LoadableMixin(l(t))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||\"loading\"===this.loadStatus?this._get(\"fields\"):(u.error(\"building summary statistics are not loaded\"),null)}load(e){const r=i(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),Promise.resolve(this)}async _fetchService(e){const t=(await r(this.url,{query:{f:\"json\"},responseType:\"json\",signal:e})).data;this.read(t,{origin:\"service\"})}};e([a({constructOnly:!0,type:String})],m.prototype,\"url\",void 0),e([a({readOnly:!0,type:[n],json:{read:{source:\"summary\"}}})],m.prototype,\"fields\",null),m=e([p(\"esri.layers.support.BuildingSummaryStatistics\")],m);var d=m;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import t from\"../core/CollectionFlattener.js\";import s from\"../core/Error.js\";import{clone as i}from\"../core/lang.js\";import{loadAll as o}from\"../core/loadAll.js\";import a from\"../core/Logger.js\";import{isSome as l}from\"../core/maybe.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as p}from\"../core/promiseUtils.js\";import{join as y}from\"../core/urlUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import{reader as d}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import m from\"../geometry/SpatialReference.js\";import h from\"./Layer.js\";import b from\"./buildingSublayers/BuildingComponentSublayer.js\";import f from\"./buildingSublayers/BuildingGroupSublayer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as S}from\"./mixins/ArcGISService.js\";import{OperationalLayer as g}from\"./mixins/OperationalLayer.js\";import{PortalLayer as j}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as w}from\"./mixins/ScaleRangeLayer.js\";import{SceneService as O}from\"./mixins/SceneService.js\";import I from\"./support/BuildingFilter.js\";import L from\"./support/BuildingSummaryStatistics.js\";import{sceneLayerFullExtent as x,readOnlyService as T,elevationInfo as F}from\"./support/commonProperties.js\";import{FetchAssociatedFeatureLayer as B}from\"./support/FetchAssociatedFeatureLayer.js\";const A=a.getLogger(\"esri.layers.BuildingSceneLayer\"),E=r.ofType(I),_=i(f.sublayersProperty);_.json.origins[\"web-scene\"]={type:[b],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},_.json.origins[\"portal-item\"]={type:[b],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}};let P=class extends(O(S(g(j(w(n(v(h)))))))){constructor(e){super(e),this.operationalLayerType=\"BuildingSceneLayer\",this.allSublayers=new t({getCollections:()=>[this.sublayers],getChildrenFunction:e=>\"building-group\"===e.type?e.sublayers:null}),this.sublayers=null,this.sublayerOverrides=null,this.filters=new E,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.type=\"building-scene\"}normalizeCtorArgs(e){return\"string\"==typeof e?{url:e}:e}destroy(){this.allSublayers.destroy()}readSublayers(e,r,t){const s=f.readSublayers(e,r,t);return f.forEachSublayer(s,(e=>e.layer=this)),this.sublayerOverrides&&(this.applySublayerOverrides(s,this.sublayerOverrides),this.sublayerOverrides=null),s}applySublayerOverrides(e,{overrides:r,context:t}){f.forEachSublayer(e,(e=>e.read(r.get(e.id),t)))}readSublayerOverrides(e,r){const t=new Map;for(const i of e)null!=i&&\"object\"==typeof i&&\"number\"==typeof i.id?t.set(i.id,i):r.messages.push(new s(\"building-scene-layer:invalid-sublayer-override\",\"Invalid value for sublayer override. Not an object or no id specified.\",{value:i}));return{overrides:t,context:r}}writeSublayerOverrides(e,r,t){const s=[];f.forEachSublayer(this.sublayers,(e=>{const r=e.write({},t);Object.keys(r).length>1&&s.push(r)})),s.length>0&&(r.sublayers=s)}writeUnappliedOverrides(e,r){r.sublayers=[],e.overrides.forEach((e=>{r.sublayers.push(i(e))}))}write(e,r){return e=super.write(e,r),!r||\"web-scene\"!==r.origin&&\"portal-item\"!==r.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,r):this.sublayerOverrides&&this.writeUnappliedOverrides(this.sublayerOverrides,e)),e}read(e,r){if(super.read(e,r),r&&(\"web-scene\"===r.origin||\"portal-item\"===r.origin)&&null!=e&&Array.isArray(e.sublayers)){const t=this.readSublayerOverrides(e.sublayers,r);this.sublayers?this.applySublayerOverrides(this.sublayers,t):this.sublayerOverrides=t}}readSummaryStatistics(e,r){if(\"string\"==typeof r.statisticsHRef){const e=y(this.parsedUrl.path,r.statisticsHRef);return new L({url:e})}return null}set elevationInfo(e){this._set(\"elevationInfo\",e),this._validateElevationInfo()}load(e){const r=l(e)?e.signal:null,t=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).catch(p).then((()=>this._fetchService(r))).then((()=>this._fetchAssociatedFeatureService(r)));return this.addResolvingPromise(t),Promise.resolve(this)}loadAll(){return o(this,(e=>{f.forEachSublayer(this.sublayers,(r=>{\"building-group\"!==r.type&&e(r)})),this.summaryStatistics&&e(this.summaryStatistics)}))}async saveAs(e,r){return this._debouncedSaveOperations(1,{...r,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"building-scene\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"building-scene\"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(!e.layerType||\"Building\"!==e.layerType)throw new s(\"buildingscenelayer:layer-type-not-supported\",\"BuildingSceneLayer does not support this layer type\",{layerType:e.layerType})}_getTypeKeywords(){return[\"Building\"]}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"absolute-height\"!==e.mode&&A.warn(\".elevationInfo=\",\"Building scene layers only support absolute-height elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&A.warn(\".elevationInfo=\",\"Building scene layers do not support featureExpressionInfo\"))}async _fetchAssociatedFeatureService(e){const r=new B(this.parsedUrl,this.portalItem,this.apiKey,e);try{this.associatedFeatureServiceItem=await r.fetchPortalItem()}catch(t){A.warn(\"Associated feature service item could not be loaded\",t)}}};e([u({type:[\"BuildingSceneLayer\"]})],P.prototype,\"operationalLayerType\",void 0),e([u({readOnly:!0})],P.prototype,\"allSublayers\",void 0),e([u(_)],P.prototype,\"sublayers\",void 0),e([d(\"service\",\"sublayers\")],P.prototype,\"readSublayers\",null),e([u({type:E,nonNullable:!0,json:{write:!0}})],P.prototype,\"filters\",void 0),e([u({type:String,json:{write:!0}})],P.prototype,\"activeFilterId\",void 0),e([u({readOnly:!0,type:L})],P.prototype,\"summaryStatistics\",void 0),e([d(\"summaryStatistics\",[\"statisticsHRef\"])],P.prototype,\"readSummaryStatistics\",null),e([u({type:[String],json:{read:!1}})],P.prototype,\"outFields\",void 0),e([u(x)],P.prototype,\"fullExtent\",void 0),e([u({type:[\"show\",\"hide\",\"hide-children\"]})],P.prototype,\"listMode\",void 0),e([u(T(m))],P.prototype,\"spatialReference\",void 0),e([u(F)],P.prototype,\"elevationInfo\",null),e([u({json:{read:!1},readOnly:!0})],P.prototype,\"type\",void 0),e([u()],P.prototype,\"associatedFeatureServiceItem\",void 0),P=e([c(\"esri.layers.BuildingSceneLayer\")],P);var K=P;export{K as default};\n"],"sourceRoot":""}