{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/objectIdUtils.js"],"names":["q","n","R","xmin","ymin","xmax","ymax","spatialReference","D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","O","e","r","z","hasZ","w","m","hasM","S","this","_queryEngine","_nextObjectId","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","t","a","i","s","features","_inferLayerProperties","fields","l","o","y","I","b","geometryType","F","_","objectIdField","j","timeInfo","push","name","message","some","type","editable","nullable","unshift","alias","d","field","x","jsonValues","indexOf","T","E","startTimeField","get","endTimeField","trackIdField","details","warnings","featureErrors","layerDefinition","drawingInfo","h","templates","g","extent","assignedObjectIds","c","featureStore","p","cacheSpatialQueries","length","u","f","_loadInitialFeatures","Promise","all","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","geometry","toLowerCase","uid","attributes","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","has","getFeature","add","isFinite","compareMinX","compareMinY","toBBox","_maxEntries","Math","max","_minEntries","ceil","_initFormat","clear","M","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minX","minY","maxX","maxY","deallocator","arguments","renderer","symbol","JSON","stringify","description","prototype","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","query","queryRelated","supportsCount","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","getObjectId","objectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","load","filter","delete","remove","search","set","geometryInfo","_boundsStore","_featuresById","_markedIds","Set","events","featureAdapter","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","getLogger","error","feature","onFeatureRemove","code","globalId","success","uniqueId","originalValue","sanitizedValue","parseFloat","String","TypeError","simplify"],"mappings":"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","file":"static/js/60.f5ed6191.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{isNone as t,isSome as i}from\"../../../../core/maybe.js\";import{getJsonType as s,isPoint as r}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromFeatures as a,convertToFeature as l,convertFromFeature as o}from\"../../featureConversionUtils.js\";import{initialObjectId as d,findLastObjectIdFromFeatures as u}from\"../../objectIdUtils.js\";import p from\"../../data/FeatureStore.js\";import{checkProjectionSupport as f,project as y}from\"../../data/projectionSupport.js\";import c from\"../../data/QueryEngine.js\";import{createDefaultAttributesFunction as m,createDrawingInfo as h,createDefaultTemplate as g}from\"./clientSideDefaults.js\";import{loadGeometryEngineForSimplify as I,createFeatureEditErrorResult as b,mixAttributes as F,createFeatureEditSuccessResult as _,simplify as j}from\"./sourceUtils.js\";import E from\"../../../support/FieldsIndex.js\";import{kebabDict as x}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as T}from\"../../../support/fieldUtils.js\";const q=n,R={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:n},D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function O(e){return r(e)?null!=e.z:!!e.hasZ}function w(e){return r(e)?null!=e.m:!!e.hasM}class S{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),n=t.fields||[],a=null!=t.hasM?t.hasM:r.hasM,l=null!=t.hasZ?t.hasZ:r.hasZ,o=!t.spatialReference&&!r.spatialReference,y=o?q:t.spatialReference||r.spatialReference,I=o?R:null,b=t.geometryType||r.geometryType,F=!b;let _=t.objectIdField||r.objectIdField,j=t.timeInfo;if(!F&&(o&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!b))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!_)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&_!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${_}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),_=r.objectIdField),_&&!r.objectIdField){let e=null;n.some((t=>t.name===_&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):n.unshift({alias:_,name:_,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const d of n){if(null==d.name&&(d.name=d.alias),null==d.alias&&(d.alias=d.name),!d.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:d});if(d.name===_&&(d.type=\"esriFieldTypeOID\"),-1===x.jsonValues.indexOf(d.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${d.name}\"`,{field:d})}const O={};this._requiredFields=[];for(const e of n)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=T(e);e.nullable||void 0!==t?O[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new E(n),this._createDefaultAttributes=m(O,_),j){if(j.startTimeField){const e=this._fieldsIndex.get(j.startTimeField);e?(j.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):j.startTimeField=null}if(j.endTimeField){const e=this._fieldsIndex.get(j.endTimeField);e?(j.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):j.endTimeField=null}if(j.trackIdField){const e=this._fieldsIndex.get(j.trackIdField);e?j.trackIdField=e.name:(j.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:j}}))}j.startTimeField||j.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:j}}),j=null)}const w={warnings:i,featureErrors:[],layerDefinition:{...D,drawingInfo:h(b),templates:g(O),extent:I,geometryType:b,objectIdField:_,fields:n,hasZ:!!l,hasM:!!a,timeInfo:j},assignedObjectIds:{}};if(this._queryEngine=new c({fields:n,geometryType:b,hasM:a,hasZ:l,objectIdField:_,spatialReference:y,featureStore:new p({geometryType:b,hasM:a,hasZ:l}),timeInfo:j,cacheSpatialQueries:!0}),!s||!s.length)return this._nextObjectId=d,w;const S=u(_,s);return this._nextObjectId=S+1,await f(s,y),this._loadInitialFeatures(w,s)}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([I(t,i),f(e.adds,t),f(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_inferLayerProperties(e,i){let r,n,a=null,l=null,o=null;for(const d of e){const e=d.geometry;if(!t(e)&&(a||(a=s(e)),l||(l=e.spatialReference),null==r&&(r=O(e)),null==n&&(n=w(e)),a&&l&&null!=r&&null!=n))break}if(i&&i.length){let e=null;i.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(o=e.name)}return{geometryType:a,spatialReference:l,objectIdField:o,hasM:n,hasZ:r}}_loadInitialFeatures(e,t){const{geometryType:r,hasM:n,hasZ:l,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine,p=[];for(const a of t){if(null!=a.uid&&(e.assignedObjectIds[a.uid]=-1),a.geometry&&r!==s(a.geometry)){e.featureErrors.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=F(this._fieldsIndex,t,a.attributes,this._requiredFields,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,a.attributes,!0),a.attributes=t,null!=a.uid&&(e.assignedObjectIds[a.uid]=a.attributes[o]),i(a.geometry)&&(a.geometry=y(a.geometry,a.geometry.spatialReference,d)),p.push(a))}if(u.addMany(a([],p,r,l,n,o)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(_(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:r}=e,{geometryType:n,hasM:l,hasZ:o,objectIdField:d,spatialReference:u,featureStore:p}=this._queryEngine,f=[];for(const a of t){if(a.geometry&&n!==s(a.geometry)){r.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),l=F(this._fieldsIndex,t,a.attributes,this._requiredFields);if(l)r.push(l);else{if(this._assignObjectId(t,a.attributes),a.attributes=t,null!=a.uid){const t=a.attributes[d];e.uidToObjectId[a.uid]=t}i(a.geometry)&&(a.geometry=y(j(a.geometry,u),a.geometry.spatialReference,u)),f.push(a),r.push(_(a.attributes[d]))}}p.addMany(a([],f,n,o,l,d))}_applyUpdateEdits({updateResults:e},t){const{geometryType:r,hasM:n,hasZ:a,objectIdField:d,spatialReference:u,featureStore:p}=this._queryEngine;for(const f of t){const{attributes:t,geometry:c}=f,m=t&&t[d];if(null==m){e.push(b(`Identifier field ${d} missing`));continue}if(!p.has(m)){e.push(b(`Feature with object id ${m} missing`));continue}const h=l(p.getFeature(m),r,a,n);if(i(c)){if(r!==s(c)){e.push(b(\"Incorrect geometry type.\"));continue}h.geometry=y(j(c,u),c.spatialReference,u)}if(t){const i=F(this._fieldsIndex,h.attributes,t,this._requiredFields);if(i){e.push(i);continue}}p.add(o(h,r,a,n,d)),e.push(_(m))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const a in r){const s=t.get(a);if(!s)continue;const c=r[a],d=m(s,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:s,originalValue:c,sanitizedValue:d}}),f.add(s.name),s&&(o||s.editable)){const t=n(s,d);if(t)return u(i(t,s,d));e[s.name]=d}}if(s)for(const n of s)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n"],"sourceRoot":""}